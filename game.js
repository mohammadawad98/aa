"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GoogleAuth;!function(){try{console.log(function(t,e){for(var i=0;i<e.length;i+=2)t=t.replaceAll(e[i],e[i+1]);return t}("N-syo.632.oyhs`2./oSo+-2:dhydMdy/32/o+`3:o/62`/o+. .+osYYyso+-.osyQSs6662NyW.63 yW:`+QQ+ -Ms-.:ymmy3+Yo``+Y:6.Qs-+WWhYs:sHhyyHys/6662NoWs63 yW:+Ss:.-+Ss:`M-3.M` .YyySYys32`QSs.2``-Hh-32sH-66 `..3 `..`3N.Wh.63yW-Ss.3`Ss+`Mh/:+hmmo2/yy++yys//Y-3 oS/`Sso`3 ohy6oH.3..6 -Hh. -+Qs/ N /W+62`Wo:Ss32Sso.MMmd+.3syy` .-` :Y+3+Ss//Q+3 +H`32sHhsyHho6-Hh`:S+--+S+N2+W` `+y+2+W.:Ss.3.Ss+/M-:ymmh.2-Y.32+Ys2+Ss+o+/Q-3oH/32Hho-://:`6 Hh`So3`SsN3oHhs-sHhsoW/ `Sso:-:Q.hM-2ymmh. /Yo`3 sYy./Q`3+Sso2`W`3`Hh.66`Hh:So3-SoN3 +Why+yWh/3-oQSso-`Mm:2/Md+/Yy+3 oYy:Q/3 `Q. -W-3`WsYys/`+oo.:Hh//So//Ss-N32-sys:3:S+.6-/+++:-3oHo3 ohdh/`+So:3 .+S/`/oo:6.+s+` `+yyo`3 +yQYs: +oo..shy. -+oSo/. NN",["W","hhhh","Q","ssss","M","mmm","Y","yyy","H","hh","S","ss","6","      ","3","   ","2","  ","N","\n"]))}catch(t){}}(),window.addEventListener("load",function(){function isBrowserCompatible(){return function(t,e,i){function o(t,e){return(void 0===t?"undefined":_typeof(t))===e}function n(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):u?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}var r=[],s=[],a={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){s.push({name:t,fn:e,options:i})},addAsyncTest:function(t){s.push({name:null,fn:t})}},h=function(){};h.prototype=a,h=new h;var l=!1;try{l="WebSocket"in t&&2===t.WebSocket.CLOSING}catch(t){}h.addTest("websockets",l);var p=e.documentElement,u="svg"===p.nodeName.toLowerCase();h.addTest("canvas",function(){var t=n("canvas");return!(!t.getContext||!t.getContext("2d"))}),h.addTest("canvastext",function(){return!1!==h.canvas&&"function"==typeof n("canvas").getContext("2d").fillText}),function(){var t,e,i,n,a,l,p;for(var u in s)if(s.hasOwnProperty(u)){if(t=[],e=s[u],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(n=o(e.fn,"function")?e.fn():e.fn,a=0;a<t.length;a++)l=t[a],p=l.split("."),1===p.length?h[p[0]]=n:(!h[p[0]]||h[p[0]]instanceof Boolean||(h[p[0]]=new Boolean(h[p[0]])),h[p[0]][p[1]]=n),r.push((n?"":"no-")+p.join("-"))}}(),function(t){var e=p.className,i=h._config.classPrefix||"";if(u&&(e=e.baseVal),h._config.enableJSClass){var o=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(o,"$1"+i+"js$2")}h._config.enableClasses&&(e+=" "+i+t.join(" "+i),u?p.className.baseVal=e:p.className=e)}(r),delete a.addTest,delete a.addAsyncTest;for(var c=0;c<h._q.length;c++)h._q[c]();t.Modernizr=h}(window,document),Modernizr.websockets&&Modernizr.canvas&&Modernizr.canvastext}if(document.getElementById("game-wrap").style.display="block",!isBrowserCompatible())return void(document.getElementById("error-view").style.display="block");!function(){function getApp(){return _anApp}function i18n(t){return window.I18N_MESSAGES[t]}function i18nCustomBundle(t){return t[LANG]?t[LANG]:t.en?t.en:t.x}function timeSecsToIntervalText(t){var e=(Math.floor(t)%60).toString(),i=(Math.floor(t/60)%60).toString(),o=(Math.floor(t/3600)%24).toString(),n=Math.floor(t/86400).toString(),r=i18n("util.time.days"),s=i18n("util.time.hours"),a=i18n("util.time.min"),h=i18n("util.time.sec");return n>0?n+" "+r+" "+o+" "+s+" "+i+" "+a+" "+e+" "+h:o>0?o+" "+s+" "+i+" "+a+" "+e+" "+h:i>0?i+" "+a+" "+e+" "+h:e+" "+h}function loadScript(t,e,i){var o=document.createElement("script"),n=!0;e&&(o.id=e),o.async="async",o.type="text/javascript",o.src=t,i&&(o.onload=o.onreadystatechange=function(){n=!1;try{i()}catch(t){console.log(t)}o.onload=o.onreadystatechange=null}),(document.head||document.getElementsByTagName("head")[0]).appendChild(o)}function extend(t,e){var i=e;return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.parent=t,i}function normDir(t){return t%=_2PI,t<0?t+_2PI:t}function minmax(t,e,i){return i>e?e:i<t?t:Number.isFinite(i)?i:.5*(t+e)}function timeDeltaIncrement(t,e,i,o){return e>t?Math.min(e,t+i*o):Math.max(e,t-i*o)}function linearApproach(t,e,i,o,n){return e+(t-e)*Math.pow(1-o,i/n)}function lerp(t,e,i){return t*(1-i)+e*i}function arraycopy(t,e,i,o){var n=i,r=e,s=e+o;if(null==t)throw new TypeError("this is null or not defined");var a=t.length>>>0,h=n>>0,l=h<0?Math.max(a+h,0):Math.min(h,a),p=r>>0,u=p<0?Math.max(a+p,0):Math.min(p,a),c=void 0===s?a:s>>0,f=c<0?Math.max(a+c,0):Math.min(c,a),d=Math.min(f-u,a-l),g=1;for(u<l&&l<u+d&&(g=-1,u+=d-1,l+=d-1);d>0;)u in t?t[l]=t[u]:delete t[l],u+=g,l+=g,d--;return t}function init2DContext(t){return t.getContext("2d")}function pixijs_removeFromParent(t){null!=t.parent&&t.parent.removeChild(t)}function any(t){return t[parseInt(Math.random()*t.length)]}function randStr(){return Math.random().toString(36).substring(2,15)}function convertHSLtoRGB(t,e,i){var o=(1-Math.abs(2*i-1))*e,n=o*(1-Math.abs(t/60%2-1)),r=i-o/2;return 0<=t&&t<60?[r+o,r+n,r+0]:60<=t&&t<120?[r+n,r+o,r+0]:120<=t&&t<180?[r+0,r+o,r+n]:180<=t&&t<240?[r+0,r+n,r+o]:240<=t&&t<300?[r+n,r+0,r+o]:[r+o,r+0,r+n]}function ADINPLAY_PREROLL_PLAYER(){function t(){$("#adbl-1").text(i18n("index.game.antiadblocker.msg1")),$("#adbl-2").text(i18n("index.game.antiadblocker.msg2")),$("#adbl-3").text(i18n("index.game.antiadblocker.msg3")),$("#adbl-4").text(i18n("index.game.antiadblocker.msg4").replace("{0}",5)),$("#adbl-continue span").text(i18n("index.game.antiadblocker.continue")),$("#adbl-continue").hide(),$("#"+n).fadeIn(500);for(var t=5,e=0;e<5;e++)setTimeout(function(){if(t--,$("#adbl-4").text(i18n("index.game.antiadblocker.msg4").replace("{0}",t)),0===t){console.log("aipAABC");try{ga("send","event","antiadblocker",window.runtimeHash+"_complete")}catch(t){}$("#adbl-continue").fadeIn(200)}},1e3*(e+1))}var e=null,i=function(){},o={},n="JDHnkHtYwyXyVgG9";return $("#adbl-continue").click(function(){$("#"+n).fadeOut(500),i(!1)}),o.a=function(t){i=t,null==e&&"undefined"!=typeof aipPlayer&&(e=new aipPlayer({AD_WIDTH:960,AD_HEIGHT:540,AD_FULLSCREEN:!0,PREROLL_ELEM:function(){return document.getElementById("1eaom01c3pxu9wd3")},AIP_COMPLETE:function(){console.log("aipC"),i(!0),$("#1eaom01c3pxu9wd3").hide(),$("#"+n).hide();try{ga("send","event","preroll",window.runtimeHash+"_complete")}catch(t){}}}))},o.b=function(){if(e){console.log("aipS");try{ga("send","event","preroll",window.runtimeHash+"_request")}catch(t){}$("#1eaom01c3pxu9wd3").show(),e.startPreRoll()}else{console.log("aipAABS");try{ga("send","event","antiadblocker",window.runtimeHash+"_start")}catch(t){}t()}},o}function ADINPLAY_BANNER(t,e){var i=$("#"+t),o=e,n={},r=!1;return n.a=function(){if(!r&&(i.empty(),i.append("<div id='"+o+"'></div>"),"undefined"!=typeof aipDisplayTag)){try{ga("send","event","banner",window.runtimeHash+"_display")}catch(t){}aipDisplayTag.display(o),r=!0}},n.c=function(){if("undefined"!=typeof aipDisplayTag){try{ga("send","event","banner",window.runtimeHash+"_refresh")}catch(t){}aipDisplayTag.refresh(o)}},n}function Application(){function t(t){var e=t+37*Math.floor(65535*Math.random());setCookie(Cookies.d,e,30)}function e(){return parseInt(getCookie(Cookies.d))%37}return function(){var i=e();console.log("init1 pSC: "+i),i>=0&&i<env.e||(i=Math.max(0,env.e-2),console.log("init2 pSC: "+i));var o={};_anApp=o,o.f=env,o.g=!1,o.i=Date.now(),o.j=0,o.k=0,o.l=null,o.m=LOCALE,o.n=LANG,o.o=null,o.p=null,o.q=null,o.r=null,o.s=null,o.t=null,o.u=null;try{navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){if(void 0!==t.coords){var e=t.coords;void 0!==e.latitude&&void 0!==e.longitude&&(o.l=t)}},function(t){})}catch(t){}return o.v=function(){o.p=new AssetsJsonManager,o.q=new ResourceManager,o.r=new AudioManager,o.s=new ScenesManager,o.t=new PropertyManager,o.u=new UserManager,o.o=new Engine,o.o.z=new MessageProcessor(o.o),o.a()},o.a=function(){try{ga("send","event","app",window.runtimeHash+"_init")}catch(t){}o.o.A=function(){o.o.B()},o.o.C=function(){var t=o.s.F.D();try{ga("send","event","game",window.runtimeHash+"_start",t)}catch(t){}o.r.G(AudioManager.AudioState.H),o.s.I(o.s.H.J())},o.o.B=function(){try{ga("send","event","game",window.runtimeHash+"_end")}catch(t){}$("body").height()>=430&&o.f.K.c(),o.p.L(),function(){var t=Math.floor(o.o.N.M),e=o.o.O;o.u.P()?o.u.Q(function(){o.R(t,e)}):o.R(t,e)}()},o.o.S=function(t){t(o.s.H.T(),o.s.H.U())},o.u.V(function(){if(o.p.W&&(o.r.G(AudioManager.AudioState.F),o.s.I(o.s.F)),o.u.P())try{var t=o.u.X();ga("set","userId",t)}catch(t){}o.Y()&&o.u.P()&&!o.u.Z()?(o.$(!1,!1),o.s.aa._(new ConsentAcceptanceToasterViewController)):o.ba(!0)}),o.p.ca(function(){o.r.G(AudioManager.AudioState.F),o.s.I(o.s.F)}),o.q.a(function(){o.o.a(),o.r.a(),o.s.a(),o.t.a(),o.p.a(),o.u.a(),o.Y()&&!o.Z()?o.s.aa._(new ConsentAcceptanceToasterViewController):o.ba(!0)})},o.da=function(t){if(o.u.P()){var e=o.u.ea();$.get(GATEWAY_HOST+"/pub/wuid/"+e+"/consent/change?value="+encodeURI(t),function(t){})}},o.fa=function(t){var e=o.u.ea(),i=o.s.F.D(),n=o.s.F.ga(),r=o.t.ha(PropertyType.ia),s=o.t.ha(PropertyType.ja),a=o.t.ha(PropertyType.ka),h=o.t.ha(PropertyType.la),l=o.t.ha(PropertyType.ma),p=0;if(null!=o.l){var u=o.l.coords.latitude,c=o.l.coords.longitude;p=1|Math.max(0,Math.min(32767,(u+90)/180*32768))<<1|Math.max(0,Math.min(65535,(c+180)/360*65536))<<16}$.get(GATEWAY_HOST+"/pub/wuid/"+e+"/start?gameMode="+encodeURI(i)+"&gh="+p+"&nickname="+encodeURI(n)+"&skinId="+encodeURI(r)+"&eyesId="+encodeURI(s)+"&mouthId="+encodeURI(a)+"&glassesId="+encodeURI(h)+"&hatId="+encodeURI(l),function(e){var i=e.server_url;t(i)})},o.na=function(){i++,console.log("start pSC: "+i),!o.f.oa&&i>=o.f.e?(o.s.I(o.s.pa),o.r.G(AudioManager.AudioState.qa),o.f.ra.b()):(t(i),o.sa())},o.sa=function(){if(o.o.ta()){o.s.I(o.s.ua),o.r.G(AudioManager.AudioState.ua);var t=o.s.F.D();setCookie(Cookies.va,t,30),console.log("save gm: "+t);var e=o.s.xa.wa();if(setCookie(Cookies.ya,e,30),console.log("save sPN: "+e),o.u.P())o.fa(function(t){o.o.za(t,o.u.ea())});else{var i=o.s.F.ga();setCookie(Cookies.Aa,i,30);var n=o.t.ha(PropertyType.ia);setCookie(Cookies.Ba,n,30),o.fa(function(t){o.o.Ca(t,i,n)})}}},o.R=function(t,e){var i=o.s.F.ga();o.s.H.Da(t,e,i),o.r.G(AudioManager.AudioState.Ea),o.s.I(o.s.H.Fa())},o.Ga=function(){if(!o.Ha())return o.t.Ia();var t=parseInt(getCookie(Cookies.Ba));return null!=t&&o.t.Ja(t,PropertyType.ia)?t:o.t.Ia()},o.Ka=function(t){setCookie(Cookies.La,!!t,1800)},o.Ha=function(){return"true"===getCookie(Cookies.La)},o.ba=function(e){if(e!=o.g){o.g=e;var n=n||{};n.consented=e,n.gdprConsent=e,o.f.Ma.a(),o.f.K.a(),o.f.ra.a(function(e){e&&t(i=0),o.sa()})}},o.$=function(t,e){setCookie(Cookies.Na,t?"true":"false"),e&&o.da(t),o.ba(t)},o.Z=function(){switch(getCookie(Cookies.Na)){case"true":return!0;default:return!1}},o.Y=function(){try{return!!window.isIPInEEA||!(null==o.l||!EEAMap.Oa(o.l.coords.latitude,o.l.coords.longitude))}catch(t){return!0}},o.Pa=function(){o.j=Date.now(),o.k=o.j-o.i,o.o.Qa(o.j,o.k),o.s.Qa(o.j,o.k),o.i=o.j},o.Ra=function(){o.s.Ra()},o}()}function Engine(){var t={Sa:0,Ta:1,Ua:2,Va:3},e={};return e.Wa=30,e.Xa=new Float32Array(100),e.Ya=0,e.Za=0,e.$a=0,e._a=0,e.ab=0,e.bb=0,e.cb=t.Sa,e.db=null,e.eb=300,e.C=function(){},e.B=function(){},e.S=function(){},e.A=function(){},e.fb=new GameParams,e.z=null,e.N=null,e.gb={},e.hb={},e.ib=12.5,e.jb=40,e.kb=1,e.lb=-1,e.mb=1,e.nb=1,e.ob=-1,e.pb=-1,e.qb=1,e.rb=1,e.sb=-1,e.O=500,e.tb=500,e.fb.ub=500,e.N=new Worm(e.fb),e.a=function(){e.N.vb(getApp().s.H.wb),setInterval(function(){e.S(function(t,i){e.xb(t,i)})},100)},e.yb=function(t,i,o,n){e.lb=t,e.mb=i,e.nb=o,e.ob=n,e.zb()},e.Ab=function(t){e.kb=t,e.zb()},e.zb=function(){e.pb=e.lb-e.kb,e.qb=e.mb+e.kb,e.rb=e.nb-e.kb,e.sb=e.ob+e.kb},e.Qa=function(i,o){e.$a+=o,e.Za-=.2*e.Ya*o,e.z.Bb(),null==e.db||e.cb!==t.Ua&&e.cb!==t.Va||(e.Cb(i,o),e.jb=4+e.ib*e.N.Db);for(var n=1e3/Math.max(1,o),r=0,s=0;s<e.Xa.length-1;s++)r+=e.Xa[s],e.Xa[s]=e.Xa[s+1];e.Xa[e.Xa.length-1]=n,e.Wa=(r+n)/e.Xa.length},e.Eb=function(t,i){return t>e.pb&&t<e.qb&&i>e.rb&&i<e.sb},e.Cb=function(t,i){var o=e.$a+e.Za,n=(o-e._a)/(e.ab-e._a);e.N.Fb(t,i),e.N.Gb(t,i,n,e.Eb);var r=0;for(var s in e.hb){var a=e.hb[s];a.Fb(t,i),a.Gb(t,i,n,e.Eb),a.Hb&&a.Db>r&&(r=a.Db),a.Ib||!(a.Jb<.005)&&a.Hb||(a.Kb(),delete e.hb[a.Mb.Lb])}e.Ab(3*r);for(var h in e.gb){var l=e.gb[h];l.Fb(t,i),l.Gb(t,i,e.Eb),l.Nb&&(l.Jb<.005||!e.Eb(l.Ob,l.Pb))&&(l.Kb(),delete e.gb[l.Mb.Lb])}},e.Qb=function(i,o){e.cb===t.Ta&&(e.cb=t.Ua,e.C());var n=getApp().j;e.bb=i,0===i?(e._a=n-95,e.ab=n,e.$a=e._a,e.Za=0):(e._a=e.ab,e.ab=e.ab+o);var r=e.$a+e.Za;e.Ya=(r-e._a)/(e.ab-e._a)},e.Rb=function(){if(e.cb===t.Ta||e.cb===t.Ua){e.cb=t.Va;var i=e.db;setTimeout(function(){e.cb===t.Va&&(e.cb=t.Sa),null!=i&&i===e.db&&(e.db.close(),e.db=null)},5e3),e.B()}},e.ta=function(){return e.cb!==t.Ua&&(e.cb=t.Ta,e.z.Sb(),e.gb={},e.hb={},e.N.Tb(),null!=e.db&&(e.db.close(),e.db=null),!0)},e.Ub=function(){e.db=null,e.z.Sb(),e.cb!==t.Va&&e.A(),e.cb=t.Sa},e.za=function(t,i){e.Vb(t,function(){var t=Math.min(2048,i.length),o=new ArrayBuffer(6+2*t),n=new DataView(o),r=0;n.setInt8(r,129),r+=1,n.setInt16(r,2800),r+=2,n.setInt8(r,1),r+=1,n.setInt16(r,t),r+=2;for(var s=0;s<t;s++)n.setInt16(r,i.charCodeAt(s)),r+=2;e.Wb(o)})},e.Ca=function(t,i,o){e.Vb(t,function(){var t=Math.min(32,i.length),n=new ArrayBuffer(7+2*t),r=new DataView(n),s=0;r.setInt8(s,129),s+=1,r.setInt16(s,2800),s+=2,r.setInt8(s,0),s+=1,r.setInt16(s,o),s+=2,r.setInt8(s,t),s++;for(var a=0;a<t;a++)r.setInt16(s,i.charCodeAt(a)),s+=2;e.Wb(n)})},e.Wb=function(t){try{null!=e.db&&e.db.readyState===WebSocket.OPEN&&e.db.send(t)}catch(t){console.log("Socket send error: "+t),e.Ub()}},e.xb=function(t,i){var o=i?128:0,n=normDir(t)/_2PI*128&127,r=255&(o|n);if(e.eb!==r){var s=new ArrayBuffer(1);new DataView(s).setInt8(0,r),e.Wb(s),e.eb=r}},e.Vb=function(t,i){var o=e.db=new WebSocket(t);o.binaryType="arraybuffer",o.onopen=function(){e.db===o&&(console.log("Socket opened"),i())},o.onclose=function(){e.db===o&&(console.log("Socket closed"),e.Ub())},o.onerror=function(t){e.db===o&&(console.log("Socket error"),e.Ub())},o.onmessage=function(t){e.db===o&&e.z.Xb(t.data)}},e}var LINE_LOGO_URL="/images/linelogo-xmas2021.png",GUEST_AVATAR_URL="/images/guest-avatar-xmas2021.png",isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,GATEWAY_HOST=atob("aHR0cHM6Ly9nYXRld2F5Lndvcm1hdGUuaW8="),RESOURCES_HOST=atob("aHR0cHM6Ly9yZXNvdXJjZXMud29ybWF0ZS5pbw=="),LANG=window.I18N_LANG;LANG||(LANG="en");var LOCALE=void 0;switch(LANG){case"uk":LOCALE="uk_UA";break;case"de":LOCALE="de_DE";break;case"fr":LOCALE="fr_FR";break;case"ru":LOCALE="ru_RU";break;case"es":LOCALE="es_ES";break;default:LOCALE="en_US"}moment.locale(LOCALE);var SHOW_FPS=!1,_anApp=void 0,POGL=function(){var p={Yb:eval(atob("UElYSQ=="))},bm=p.Yb[atob("QkxFTkRfTU9ERVM=")],wm=p.Yb[atob("V1JBUF9NT0RFUw==")];return{Zb:p.Yb[atob("Q29udGFpbmVy")],$b:p.Yb[atob("QmFzZVRleHR1cmU=")],_b:p.Yb[atob("VGV4dHVyZQ==")],ac:p.Yb[atob("UmVuZGVyZXI=")],bc:p.Yb[atob("R3JhcGhpY3M=")],cc:p.Yb[atob("U2hhZGVy")],dc:p.Yb[atob("UmVjdGFuZ2xl")],ec:p.Yb[atob("U3ByaXRl")],fc:p.Yb[atob("VGV4dA==")],gc:p.Yb[atob("R2VvbWV0cnk=")],hc:p.Yb[atob("TWVzaA==")],ic:{jc:bm[atob("QURE")]},kc:{lc:wm[atob("UkVQRUFU")]}}}(),_2PI=2*Math.PI;!function(){var t="Z2V0",e="=",i=t+"SW50",o=t+"RmxvYXQ",n=[atob(i+"OA=="),atob(i+"MTY"+e),atob(i+"MzI"+e),atob(o+"zMg=="),atob(o+"2NA==")];DataView.prototype.mc=function(t){return this[n[0]](t)},DataView.prototype.nc=function(t){return this[n[1]](t)},DataView.prototype.oc=function(t){return this[n[2]](t)},DataView.prototype.pc=function(t){return this[n[3]](t)},DataView.prototype.qc=function(t){return this[n[4]](t)}}();var Ability=function(){function t(t){this.rc=t,this.sc=!1,this.tc=1}return t.VELOCITY_TYPE=0,t.FLEXIBLE_TYPE=1,t.MAGNETIC_TYPE=2,t.ZOOM_TYPE=6,t.X2_TYPE=3,t.X5_TYPE=4,t.X10_TYPE=5,t}(),AssetsJsonManager=function(){function t(){this.uc=[],this.vc={},this.wc=null,this.xc=AssetsJsonResources.yc()}function e(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i])}return t.prototype.a=function(){this.L()},t.prototype.W=function(){return null!=this.wc},t.prototype.zc=function(){return null!=this.wc?this.wc.revision:-1},t.prototype.Ac=function(){return this.wc},t.prototype.L=function(){var t=this;$.get(RESOURCES_HOST+"/dynamic/assets/revision.json",function(e){e>t.zc()&&t.Bc()})},t.prototype.Bc=function(){var t=this;$.get(RESOURCES_HOST+"/dynamic/assets/registry.json",function(e){e.revision>t.zc()&&t.Cc(e)})},t.prototype.ca=function(t){this.uc.push(t)},t.prototype.Dc=function(){return this.xc},t.prototype.Ec=function(){for(var t=0;t<this.uc.length;t++)this.uc[t]()},t.prototype.Fc=function(t,i){if(!(t.revision<=this.zc())){var o=i;e(this.vc,function(t,e){var i=o[t];null!=i&&e.Gc===i.Gc||(print("disposing prev texture: "+t+" at "+e.Gc),e.Hc.destroy())}),this.vc=o,this.wc=t,this.xc=AssetsJsonResources.Ic(this.wc,this.vc),this.Ec()}},t.prototype.Cc=function(t){var i={};e(t.textureDict,function(t,e){var o=RESOURCES_HOST+e.relativePath;i[t]=new FSTexture(o,POGL.$b.from(o))}),this.Fc(t,i)},t}(),AssetsJsonResources=function(){function t(){this.Jc=null,this.Kc=null,this.Lc=null,this.Mc=null,this.Nc=null,this.Oc=null,this.Pc=null,this.Qc=null,this.Rc=null,this.Sc=null,this.Tc=null,this.Uc=null,this.Vc=null,this.Wc=null,this.Xc=null,this.Yc=null}function e(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i])}return t.yc=function(){var t=new AssetsJsonResources;return t.Jc={},t.Kc={Zc:null,$c:null},t.Lc={},t.Mc={Zc:null},t.Nc={},t.Oc={_c:"#FFFFFF",Zc:[],$c:[]},t.Pc={},t.Qc={ad:{},bd:t.Oc,cd:t.Kc},t.Rc={},t.Sc={Zc:[]},t.Tc={},t.Uc={Zc:[]},t.Vc={},t.Wc={Zc:[]},t.Xc={},t.Yc={Zc:[]},t},t.Ic=function(t,i){var o=new AssetsJsonResources,n={};e(t.colorDict,function(t,e){n[t]=e});var r={};e(t.regionDict,function(t,e){r[t]=new Region(i[e.texture].Hc,e.x,e.y,e.w,e.h,e.px,e.py,e.pw,e.ph)}),o.Nc={};for(var s=0;s<t.skinArrayDict.length;s++){var a=t.skinArrayDict[s];o.Nc[a.id]=new AssetsJsonResources.WormSkinData("#"+n[a.prime],a.base.map(function(t){return r[t]}),a.glow.map(function(t){return r[t]}))}var h=t.skinUnknown;o.Oc=new AssetsJsonResources.WormSkinData("#"+n[h.prime],h.base.map(function(t){return r[t]}),h.glow.map(function(t){return r[t]})),o.Rc={},e(t.eyesDict,function(t,e){t=parseInt(t),o.Rc[t]=new AssetsJsonResources.WearSkinData(e.base.map(function(t){return r[t.region]}))}),o.Sc=new AssetsJsonResources.WearSkinData(t.eyesUnknown.base.map(function(t){return r[t.region]})),o.Tc={},e(t.mouthDict,function(t,e){t=parseInt(t),o.Tc[t]=new AssetsJsonResources.WearSkinData(e.base.map(function(t){return r[t.region]}))}),o.Uc=new AssetsJsonResources.WearSkinData(t.mouthUnknown.base.map(function(t){return r[t.region]})),o.Vc={},e(t.glassesDict,function(t,e){t=parseInt(t),o.Vc[t]=new AssetsJsonResources.WearSkinData(e.base.map(function(t){return r[t.region]}))}),o.Wc=new AssetsJsonResources.WearSkinData(t.glassesUnknown.base.map(function(t){return r[t.region]})),o.Xc={},e(t.hatDict,function(t,e){t=parseInt(t),o.Xc[t]=new AssetsJsonResources.WearSkinData(e.base.map(function(t){return r[t.region]}))}),o.Yc=new AssetsJsonResources.WearSkinData(t.hatUnknown.base.map(function(t){return r[t.region]})),o.Jc={},e(t.portionDict,function(t,e){t=parseInt(t),o.Jc[t]=new AssetsJsonResources.PortionSkinData(r[e.base],r[e.glow])});var l=t.portionUnknown;o.Kc=new AssetsJsonResources.PortionSkinData(r[l.base],r[l.glow]),o.Lc={},e(t.abilityDict,function(t,e){t=parseInt(t),o.Lc[t]=new AssetsJsonResources.AbilitySkinData(r[e.base])});var p=t.abilityUnknown;return o.Mc=new AssetsJsonResources.AbilitySkinData(r[p.base]),o.Pc={},e(t.teamDict,function(t,e){t=parseInt(t),o.Pc[t]=new AssetsJsonResources.TeamSkinData(e.name,new AssetsJsonResources.WormSkinData("#"+n[e.skin.prime],[],e.skin.glow.map(function(t){return r[t]})),new AssetsJsonResources.PortionSkinData([],r[e.portion.glow]))}),o.Qc=new AssetsJsonResources.TeamSkinData({},o.Oc,o.Kc),o},t.prototype.dd=function(t){var e=this.Nc[t];return e||this.Oc},t.prototype.ed=function(t){var e=this.Pc[t];return e||this.Qc},t.prototype.fd=function(t){var e=this.Rc[t];return e||this.Sc},t.prototype.gd=function(t){var e=this.Tc[t];return e||this.Uc},t.prototype.hd=function(t){var e=this.Vc[t];return e||this.Wc},t.prototype.jd=function(t){var e=this.Xc[t];return e||this.Yc},t.prototype.kd=function(t){var e=this.Jc[t];return e||this.Kc},t.prototype.ld=function(t){var e=this.Lc[t];return e||this.Mc},t.TeamSkinData=function(){function t(t,e,i){this.ad=t,this.bd=e,this.cd=i}return t}(),t.WormSkinData=function(){function t(t,e,i){this._c=t,this.Zc=e,this.$c=i}return t}(),t.WearSkinData=function(){function t(t){this.Zc=t}return t}(),t.PortionSkinData=function(){function t(t,e){this.Zc=t,this.$c=e}return t}(),t.AbilitySkinData=function(){function t(t){this.Zc=t}return t}(),t}(),AudioManager=function(){function t(){this.md=AudioManager.AudioState.ua,this.nd=!1,this.od=!1,this.pd=null,this.qd=null}t.prototype.a=function(){},t.prototype.rd=function(t){this.od=t},t.prototype.G=function(t){this.md=t,this.sd()},t.prototype.td=function(t){this.nd=t,this.sd()},t.prototype.sd=function(){},t.prototype.ud=function(t,e){if(!getApp().p.W)return null;var i=t[e];return null==i||0==i.length?null:i[Math.floor(Math.random()*i.length)].cloneNode()},t.prototype.vd=function(t,e,i){if(this.od&&!(i<=0)){var o=this.ud(t,e);null!=o&&(o.volume=Math.min(1,i),o.play())}},t.prototype.wd=function(t,e){this.md.xd&&this.vd(app.q.yd,t,e)},t.prototype.zd=function(t,e){this.md.Ad&&this.vd(app.q.Bd,t,e)},t.prototype.Cd=function(){},t.prototype.Dd=function(){},t.prototype.Ed=function(){},t.prototype.Fd=function(){},t.prototype.Gd=function(){},t.prototype.Hd=function(){},t.prototype.Id=function(t,e,i){},t.prototype.Jd=function(t){},t.prototype.Kd=function(t){},t.prototype.Ld=function(t){},t.prototype.Md=function(t){},t.prototype.Nd=function(t){},t.prototype.Od=function(t){},t.prototype.Pd=function(t){},t.prototype.Qd=function(t){},t.prototype.Rd=function(t){},t.prototype.Sd=function(t){},t.prototype.Td=function(t){},t.prototype.Ud=function(t){},t.prototype.Vd=function(t){},t.prototype.Wd=function(t){},t.prototype.Xd=function(t,e){},t.prototype.Yd=function(t){},t.prototype.Zd=function(t,e,i){};var e=(function(){function t(t){this.$d=new e(t,.5),this.$d._d.loop=!0,this.ae=!1}t.prototype.be=function(t){t?this.b():this.ce()},t.prototype.b=function(){this.ae||(this.ae=!0,this.$d.de=0,this.$d.ee(1500,100))},t.prototype.ce=function(){this.ae&&(this.ae=!1,this.$d.fe(1500,100))}}(),function(){function t(t){this.ge=t.map(function(t){return new e(t,.4)}),i(this.ge,0,this.ge.length),this.he=null,this.ie=0,this.ae=!1,this.je=1e4}function i(t,e,i){for(var o=i-1;o>e;o--){var n=e+Math.floor(Math.random()*(o-e+1)),r=t[o];t[o]=t[n],t[n]=r}}t.prototype.be=function(t){t?this.b():this.ce()},t.prototype.b=function(){this.ae||(this.ae=!0,this.ke(1500))},t.prototype.ce=function(){this.ae&&(this.ae=!1,null!=this.he&&this.he.fe(800,50))},t.prototype.ke=function(t){if(this.ae){null==this.he&&(this.he=this.le()),this.he._d.currentTime+this.je/1e3>this.he._d.duration&&(this.he=this.le(),this.he._d.currentTime=0),console.log("Current track '"+this.he._d.src+"', change in (ms) "+(1e3*(this.he._d.duration-this.he._d.currentTime)-this.je)),this.he.de=0,this.he.ee(t,100);var e=1e3*(this.he._d.duration-this.he._d.currentTime)-this.je,i=this,o=setTimeout(function(){i.ae&&o==i.ie&&(i.he.fe(i.je,100),i.he=i.le(),i.he._d.currentTime=0,i.ke(i.je))},e);this.ie=o}},t.prototype.le=function(){var t=this.ge[0],e=Math.max(1,this.ge.length/2);return i(this.ge,e,this.ge.length),this.ge.push(this.ge.shift()),t}}(),function(){function t(t,e){this._d=t,this.me=e,this.de=0,t.volume=0,this.ne=0,this.oe=!1}return t.prototype.ee=function(t,e){console.log("fade IN "+this._d.src),this.pe(!0,t,e)},t.prototype.fe=function(t,e){console.log("fade OUT "+this._d.src),this.pe(!1,t,e)},t.prototype.pe=function(t,e,i){this.oe&&clearInterval(this.ne);var o=this,n=1/(e/i),r=setInterval(function(){if(o.oe&&r!=o.ne)return void clearInterval(r);t?(o.de=Math.min(1,o.de+n),o._d.volume=o.de*o.me,o.de>=1&&(o.oe=!1,clearInterval(r))):(o.de=Math.max(0,o.de-n),o._d.volume=o.de*o.me,o.de<=0&&(o._d.pause(),o.oe=!1,clearInterval(r)))},i);this.oe=!0,this.ne=r,this._d.play()},t}());return t.AudioState={ua:{qe:!1,re:!1,Ad:!0,xd:!1},F:{qe:!1,re:!0,Ad:!0,xd:!1},H:{qe:!0,re:!1,Ad:!1,xd:!0},Ea:{qe:!1,re:!1,Ad:!0,xd:!1},qa:{qe:!1,re:!1,Ad:!1,xd:!1}},t}(),BackgroundView=function(){function t(t){this.se=t,this.te=t.get()[0],this.ue=init2DContext(this.te),this.Ra()}var e=[{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:1,ye:2,ze:0},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:1.5,ye:1.5,ze:1},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:2,ye:1,ze:2},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:3,ye:2,ze:3},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:2.5,ye:2.5,ze:4},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:2,ye:3,ze:5},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:5,ye:4,ze:6},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:4.5,ye:4.5,ze:7},{ve:_2PI*Math.random(),we:.1+.4*Math.random(),xe:4,ye:5,ze:8}];return t.prototype.Ra=function(){var t=window.devicePixelRatio?window.devicePixelRatio:1;this.te.width=t*this.se.width()*.25,this.te.height=t*this.se.height()*.25},t.prototype.Pa=function(t){var i=this.te.width,o=this.te.height;this.ue.setTransform(1,0,0,1,0,0),this.ue.fillStyle="#000000",this.ue.fillRect(0,0,i,o);var n=getApp();if(n.q.Ae){this.ue.save();for(var r=.8*Math.max(i,o),s=0;s<e.length;s++){this.ue.globalCompositeOperation="normal";var a=e[s],h=Math.cos(a.xe*(8e-5*t)+a.ve),l=Math.sin(a.ye*(8e-5*t));this.ue.globalAlpha=.2+.2*Math.cos(a.ve+a.we*(.001*t)),this.ue.drawImage(n.q.Ae[a.ze],.5*i+.4*h*i-.5*r,.5*o+.2*l*o-.5*r,r,r)}this.ue.restore()}},t}(),Cookies=function(){function t(){}return t.Na="consent_state_2",t.ya="showPlayerNames",t.Be="musicEnabled",t.Ce="sfxEnabled",t.De="account_type",t.va="gameMode",t.Aa="nickname",t.Ba="skin",t.d="prerollCount",t.La="shared",t}(),EEAMap=function(){function t(t,e,i){for(var o=!1,n=i.length,r=0,s=n-1;r<n;s=r++)i[r][1]>e!=i[s][1]>e&&t<(i[s][0]-i[r][0])*(e-i[r][1])/(i[s][1]-i[r][1])+i[r][0]&&(o=!o);return o}var e=[[-28.06744,64.95936],[-10.59082,72.91964],[14.11773,81.39558],[36.51855,81.51827],[32.82715,71.01696],[31.64063,69.41897],[29.41419,68.43628],[30.64379,67.47302],[29.88281,66.76592],[30.73975,65.50385],[30.73975,64.47279],[31.48682,63.49957],[32.18994,62.83509],[28.47726,60.25122],[28.76221,59.26588],[28.03711,58.60833],[28.38867,57.53942],[28.83955,56.2377],[31.24512,55.87531],[31.61865,55.34164],[31.92627,54.3037],[33.50497,53.26758],[32.73926,52.85586],[32.23389,52.4694],[34.05762,52.44262],[34.98047,51.79503],[35.99121,50.88917],[36.67236,50.38751],[37.74902,50.51343],[40.78125,49.62495],[40.47363,47.70976],[38.62799,46.92028],[37.53193,46.55915],[36.72182,44.46428],[39.68218,43.19733],[40.1521,43.74422],[43.52783,43.03678],[45.30762,42.73087],[46.99951,41.98399],[47.26318,40.73061],[44.20009,40.86309],[45.35156,39.57182],[45.43945,36.73888],[35.64789,35.26481],[33.13477,33.65121],[21.47977,33.92486],[12.16268,34.32477],[11.82301,37.34239],[6.09112,38.28597],[-1.96037,35.62069],[-4.82156,35.60443],[-7.6498,35.26589],[-16.45237,37.44851],[-28.06744,64.95936]];return{Oa:function(i,o){return t(o,i,e)}}}(),FloatingStringManager=function(){function t(t){var e=void 0;e=t>0?"+"+Math.floor(t):t<0?"-"+Math.floor(t):"0";var o=Math.min(1.5,.5+t/600),r=void 0;if(t<1)r="0xFFFFFF";else if(t<30){var s=(t-1)/29;r=i(1*(1-s)+.96*s,1*(1-s)+.82*s,1*(1-s)+0*s)}else if(t<300){var a=(t-30)/270;r=i(.96*(1-a)+.93*a,.82*(1-a)+.34*a,0*(1-a)+.25*a)}else if(t<700){var h=(t-300)/400;r=i(.93*(1-h)+.98*h,.34*(1-h)+0*h,.25*(1-h)+.98*h)}else r=i(.98,0,.98);var l=Math.random(),p=1+.5*Math.random();return new n(e,r,!0,.5,o,l,p)}function e(t,e){var o=void 0,r=void 0;return e?(o=1.3,r=i(.93,.34,.25)):(o=1.1,r=i(.96,.82,0)),new n(t,r,!0,.5,o,.5,.7)}function i(t,e,i){return((255*t&255)<<16)+((255*e&255)<<8)+(255*i&255)}var o=extend(POGL.Zb,function(){POGL.Zb.call(this),this.Ee=[],this.Fe=0});o.prototype.Ge=function(e){if(this.Fe+=e,this.Fe>=1){var i=Math.floor(this.Fe);this.Fe-=i;var o=t(i);this.addChild(o),this.Ee.push(o)}},o.prototype.He=function(t){if(t){var i=e(i18n("index.game.floating.headshot"),!0);this.addChild(i),this.Ee.push(i)}else{var o=e(i18n("index.game.floating.wellDone"),!1);this.addChild(o),this.Ee.push(o)}},o.prototype.Ie=function(t,e){for(var i=getApp().s.H.wb,o=i.Je.width/i.Je.resolution,n=i.Je.height/i.Je.resolution,r=0;r<this.Ee.length;){var s=this.Ee[r];s.Ke=s.Ke+e/2e3*s.Le,s.Me=s.Me+e/2e3*s.Ne,s.alpha=.5*Math.sin(Math.PI*s.Me),s.scale.set(s.Ke),s.position.x=o*(.25+.5*s.Oe),s.position.y=s.Pe?n*(1-.5*(1+s.Me)):n*(1-.5*(0+s.Me)),s.Me>1&&(pixijs_removeFromParent(s),this.Ee.splice(r,1),r--),r++}};var n=function(){return extend(POGL.fc,function(t,e,i,o,n,r,s){POGL.fc.call(this,t,{fill:e,fontFamily:"PTSans",fontSize:36}),this.anchor.set(.5),this.Pe=i,this.Ke=o,this.Le=n,this.Oe=r,this.Me=0,this.Ne=s})}();return o}(),FSTexture=function(){function t(t,e){this.Gc=t,this.Hc=e}return t}(),GameMode={Qe:0,Re:16},GameParams=function(){function t(){this.Se=GameMode.Qe,this.Te=0,this.ub=500,this.Ue=4e3,this.Ve=7e3}return t.TEAM_DEFAULT=0,t.prototype.We=function(){return 1.02*this.ub},t}(),GameView=function(){function t(t){this.Xe=t.get()[0],this.Je=new POGL.ac({view:this.Xe,backgroundColor:0,antialias:!0}),this.Ye=new POGL.Zb,this.Ye.sortableChildren=!0,this.Ze=Math.floor(360*Math.random()),this.$e=0,this._e=0,this.af=15,this.bf=.5,this.cf=0,this.df=new WMGameBackgroundSprite,this.ef=new POGL.bc,this.ff=new POGL.Zb,this.gf=new POGL.Zb,this.gf.sortableChildren=!0,this.hf=new POGL.Zb,this.if=new POGL.Zb,this.if.sortableChildren=!0,this.jf=new POGL.Zb,this.kf=new i,this.lf=new o,this.mf=new n,this.nf=new FloatingStringManager,this.pf=new POGL.ec,this.qf={x:0,y:0},this.a()}var e=$("#game-canvas");t.prototype.a=function(){this.Je.backgroundColor=0,this.df.rf.zIndex=10,this.Ye.addChild(this.df.rf),this.ef.zIndex=20,this.Ye.addChild(this.ef),this.ff.zIndex=5e3,this.Ye.addChild(this.ff),this.gf.zIndex=5100,this.Ye.addChild(this.gf),this.hf.zIndex=1e4,this.Ye.addChild(this.hf),this.pf.texture=getApp().q.sf,this.pf.anchor.set(.5),this.pf.zIndex=1,this.if.addChild(this.pf),this.jf.alpha=.6,this.jf.zIndex=2,this.if.addChild(this.jf),this.nf.zIndex=3,this.if.addChild(this.nf),this.kf.alpha=.8,this.kf.zIndex=4,this.if.addChild(this.kf),this.lf.zIndex=5,this.if.addChild(this.lf),this.mf.zIndex=6,this.if.addChild(this.mf),this.Ra()},t.prototype.Ra=function(){var t=window.devicePixelRatio?window.devicePixelRatio:1,i=e.width(),o=e.height();this.Je.resize(i,o),this.Je.resolution=t,this.Xe.width=t*i,this.Xe.height=t*o,this.bf=Math.min(Math.min(i,o),.625*Math.max(i,o)),this.pf.position.x=i/2,this.pf.position.y=o/2,this.pf.width=i,this.pf.height=o,this.kf.position.x=60,this.kf.position.y=60,this.lf.position.x=110,this.lf.position.y=10,this.mf.position.x=i-225,this.mf.position.y=1},t.prototype.Ie=function(t,e){var i=getApp();this.af=15,this.ff.removeChildren(),this.gf.removeChildren(),this.hf.removeChildren(),this.jf.removeChildren(),this.df.tf(t.Se==GameMode.Qe?i.q.uf:i.q.vf);var o=this.ef;o.clear(),o.lineStyle(.2,16711680,.3),o.drawCircle(0,0,t.ub),o.endFill(),this.mf.wf=e,this.jf.visible=e},t.prototype.Pa=function(t,e){if(!(this.Je.width<=5)){var i=getApp(),o=i.o.N,n=this.Je.width/this.Je.resolution,r=this.Je.height/this.Je.resolution;this.af=timeDeltaIncrement(this.af,i.o.jb,e,.002);var s=this.bf/this.af,a=i.o.N.xf[Ability.ZOOM_TYPE],h=null!=a&&a.sc;this.cf=minmax(0,1,this.cf+e/1e3*(.1*(h?1:0)-this.cf)),this.pf.alpha=this.cf,
this.Ze=this.Ze+.01*e,this.Ze>360&&(this.Ze=this.Ze%360),this.$e=Math.sin(t/1200*2*Math.PI);var l=o.yf();this.qf.x=linearApproach(this.qf.x,l.x,e,.5,33.333),this.qf.y=linearApproach(this.qf.y,l.y,e,.5,33.333);var p=n/s/2,u=r/s/2;i.o.yb(this.qf.x-1.3*p,this.qf.x+1.3*p,this.qf.y-1.3*u,this.qf.y+1.3*u),this.df.Ie(this.qf.x,this.qf.y,2*p,2*u);var c=i.o.fb.ub;this.Ye.scale.x=s,this.Ye.scale.y=s,this.Ye.position.x=n/2-this.qf.x*s,this.Ye.position.y=r/2-this.qf.y*s;var f=Math.hypot(l.x,l.y);if(f>c-10){this._e=minmax(0,1,1+(f-c)/10);var d=Math.cos(this.Ze*_2PI/360)*(1-this._e)+1*this._e,g=Math.sin(this.Ze*_2PI/360)*(1-this._e),y=(Math.atan2(g,d)+_2PI)%_2PI*360/_2PI,w=this._e*(.5+.5*this.$e),v=convertHSLtoRGB(Math.floor(y),1,.75-.25*this._e);this.df.zf(v[0],v[1],v[2],.1+.2*w)}else{this._e=0;var k=convertHSLtoRGB(Math.floor(this.Ze),1,.75);this.df.zf(k[0],k[1],k[2],.1)}for(var b=0;b<this.jf.children.length;b++){var m=this.jf.children[b];m.position.x=n/2-(this.qf.x-m.Af.x)*s,m.position.y=r/2-(this.qf.y-m.Af.y)*s}this.kf.Bf.position.x=l.x/c*this.kf.Cf,this.kf.Bf.position.y=l.y/c*this.kf.Cf,this.lf.Qa(t),this.nf.Ie(t,e),this.Je.render(this.Ye,null,!0),this.Je.render(this.if,null,!1)}},t.prototype.Df=function(t,e){e.Gf.Ff.Ef().zIndex=(t+2147483648)/4294967296*5e3,this.ff.addChild(e.Gf.Hf.Ef()),this.gf.addChild(e.Gf.Ff.Ef())},t.prototype.If=function(t,e,i){e.Jf.zIndex=getApp().o.fb.Te?0:10+(t+32768)/65536*5e3,this.hf.addChild(e.Jf),t!=getApp().o.fb.Te&&this.jf.addChild(i)};var i=function(){return extend(POGL.Zb,function(){POGL.Zb.call(this),this.Cf=40,this.Kf=new POGL.ec,this.Kf.anchor.set(.5),this.Bf=new POGL.bc;var t=new POGL.bc;t.beginFill("black",.4),t.drawCircle(0,0,this.Cf),t.endFill(),t.lineStyle(2,16225317),t.drawCircle(0,0,this.Cf),t.moveTo(0,-this.Cf),t.lineTo(0,+this.Cf),t.moveTo(-this.Cf,0),t.lineTo(+this.Cf,0),t.endFill(),this.Kf.alpha=.5,this.Bf.zIndex=2,this.Bf.alpha=.9,this.Bf.beginFill(16225317),this.Bf.drawCircle(0,0,.06*this.Cf),this.Bf.endFill(),this.Bf.lineStyle(1,"black"),this.Bf.drawCircle(0,0,.06*this.Cf),this.Bf.endFill(),this.addChild(t),this.addChild(this.Kf),this.addChild(this.Bf)})}(),o=function(){var t=extend(POGL.Zb,function(){POGL.Zb.call(this),this.Lf={}});t.prototype.Qa=function(t){var e=.5+.5*Math.cos(_2PI*(t/1e3/1.6));for(var i in this.Lf){var o=this.Lf[i],n=o.Mf;o.alpha=1-n+n*e}},t.prototype.Ie=function(t){for(var i in this.Lf)null!=t[i]&&t[i].sc||(pixijs_removeFromParent(this.Lf[i]),delete this.Lf[i]);var o=0;for(var n in t){var r=t[n];if(r.sc){var s=this.Lf[n];if(!s){var a=getApp().p.Dc().ld(r.rc).Zc;s=new e,s.texture=a.Hc,s.width=40,s.height=40,this.Lf[n]=s,this.addChild(s)}s.Mf=r.tc,s.position.x=o,o+=40}}};var e=function(){return extend(POGL.ec,function(){POGL.ec.call(this),this.Mf=0})}();return t}(),n=function(){var t=extend(POGL.Zb,function(){POGL.Zb.call(this),this.wf=!0,this.Nf=12,this.Of=9,this.Ee=[];for(var t=0;t<14;t++)this.Pf()});t.prototype.Ie=function(t){var e=getApp(),i=e.o.fb.Se==GameMode.Re,o=0,n=0;n>=this.Ee.length&&this.Pf(),this.Ee[n].Qf(1,"white"),this.Ee[n].Rf("",i18n("index.game.leader.top10"),"("+e.o.tb+" online)"),this.Ee[n].position.y=o,o+=this.Nf,n+=1,t.Sf.length>0&&(o+=this.Of);for(var r=0;r<t.Sf.length;r++){var s=t.Sf[r],a=e.p.Dc().ed(s.Tf);n>=this.Ee.length&&this.Pf(),this.Ee[n].Qf(.8,a.bd._c),this.Ee[n].Rf(""+(r+1),i18nCustomBundle(a.ad),""+Math.floor(s.M)),this.Ee[n].position.y=o,o+=this.Nf,n+=1}t.Uf.length>0&&(o+=this.Of);for(var h=0;h<t.Uf.length;h++){var l=t.Uf[h],p=e.o.fb.Te==l.Vf,u=void 0,c=void 0;if(p)u="white",c=e.o.N.Mb.ad;else{var f=e.o.hb[l.Vf];null!=f?(u=i?e.p.Dc().ed(f.Mb.Wf).bd._c:e.p.Dc().dd(f.Mb.Xf)._c,c=this.wf?f.Mb.ad:"---"):(u="gray",c="?")}p&&(o+=this.Of),n>=this.Ee.length&&this.Pf(),this.Ee[n].Qf(p?1:.8,u),this.Ee[n].Rf(""+(h+1),c,""+Math.floor(l.M)),this.Ee[n].position.y=o,o+=this.Nf,n+=1,p&&(o+=this.Of)}for(e.o.O>t.Uf.length&&(o+=this.Of,n>=this.Ee.length&&this.Pf(),this.Ee[n].Qf(1,"white"),this.Ee[n].Rf(""+e.o.O,e.o.N.Mb.ad,""+Math.floor(e.o.N.M)),this.Ee[n].position.y=o,o+=this.Nf,n+=1,o+=this.Of);this.Ee.length>n;)pixijs_removeFromParent(this.Ee.pop())},t.prototype.Pf=function(){var t=new e;t.position.y=0,this.Ee.length>0&&(t.position.y=this.Ee[this.Ee.length-1].position.y+this.Nf),this.Ee.push(t),this.addChild(t)};var e=function(){var t=extend(POGL.Zb,function(){POGL.Zb.call(this),this.Yf=new POGL.fc("",{fontFamily:"PTSans",fontSize:12,fill:"white"}),this.Yf.anchor.x=1,this.Yf.position.x=30,this.addChild(this.Yf),this.Zf=new POGL.fc("",{fontFamily:"PTSans",fontSize:12,fill:"white"}),this.Zf.anchor.x=0,this.Zf.position.x=35,this.addChild(this.Zf),this.$f=new POGL.fc("",{fontFamily:"PTSans",fontSize:12,fill:"white"}),this.$f.anchor.x=1,this.$f.position.x=220,this.addChild(this.$f)});return t.prototype.Rf=function(t,e,i){this.Yf.text=t,this.$f.text=i;var o=e;for(this.Zf.text=o;this.Zf.width>100;)o=o.substring(0,o.length-1),this.Zf.text=o+".."},t.prototype.Qf=function(t,e){this.Yf.alpha=t,this.Yf.style.fill=e,this.Zf.alpha=t,this.Zf.style.fill=e,this.$f.alpha=t,this.$f.style.fill=e},t}();return t}();return t}(),MessageProcessor=function(){function t(t){this.o=t,this._f=[],this.ag=0}t.prototype.Xb=function(t){this._f.push(new DataView(t))},t.prototype.Sb=function(){this._f=[],this.ag=0},t.prototype.Bb=function(){for(var t=0;t<10;t++){if(0===this._f.length)return;var e=this._f.shift();try{this.bg(e)}catch(t){throw console.log("DataReader error: "+t),t}}},t.prototype.bg=function(t){switch(255&t.mc(0)){case 0:return void this.cg(t,1);case 1:return void this.dg(t,1);case 2:return void this.eg(t,1);case 3:return void this.fg(t,1);case 4:return void this.gg(t,1);case 5:return void this.hg(t,1)}},t.prototype.cg=function(t,e){console.log("sgp1"),this.o.fb.Se=t.mc(e),e+=1;var i=t.nc(e);return e+=2,this.o.fb.Te=i,this.o.N.Mb.Lb=i,this.o.fb.ub=t.pc(e),e+=4,this.o.fb.Ue=t.pc(e),e+=4,this.o.fb.Ve=t.pc(e),e+=4,getApp().s.H.wb.Ie(this.o.fb,getApp().s.xa.wa()),console.log("sgp1112"),e},t.prototype.dg=function(t,e){var i=this.ag++,o=t.nc(e);e+=2;var n=void 0;n=this.ig(t,e),e+=this.jg(n);for(var r=0;r<n;r++)e=this.kg(t,e);n=this.ig(t,e),e+=this.jg(n);for(var s=0;s<n;s++)e=this.lg(t,e);n=this.ig(t,e),e+=this.jg(n);for(var a=0;a<n;a++)e=this.mg(t,e);n=this.ig(t,e),e+=this.jg(n);for(var h=0;h<n;h++)e=this.ng(t,e);n=this.ig(t,e),e+=this.jg(n);for(var l=0;l<n;l++)e=this.og(t,e);n=this.ig(t,e),e+=this.jg(n);for(var p=0;p<n;p++)e=this.pg(t,e);n=this.ig(t,e),e+=this.jg(n);for(var u=0;u<n;u++)e=this.qg(t,e);n=this.ig(t,e),e+=this.jg(n);for(var c=0;c<n;c++)e=this.rg(t,e);return i>0&&(e=this.sg(t,e)),this.o.Qb(i,o),e},t.prototype.ng=function(t,e){var i=new Worm.Config;i.Lb=t.nc(e),e+=2,i.Wf=this.o.fb.Se==GameMode.Re?t.mc(e++):GameParams.TEAM_DEFAULT,i.Xf=t.nc(e),e+=2,i.tg=t.nc(e),e+=2,i.ug=t.nc(e),e+=2,i.vg=t.nc(e),e+=2,i.wg=t.nc(e),e+=2;var o=t.mc(e);e+=1;for(var n="",r=0;r<o;r++)n+=String.fromCharCode(t.nc(e)),e+=2;if(i.ad=n,this.o.fb.Te===i.Lb)this.o.N.xg(i);else{var s=this.o.hb[i.Lb];null!=s&&s.Kb();var a=new Worm(this.o.fb);a.vb(getApp().s.H.wb),this.o.hb[i.Lb]=a,a.xg(i)}return e},t.prototype.og=function(t,e){var i=t.nc(e);e+=2;var o=t.mc(e);e++;var n=!!(1&o),r=!!(2&o),s=0;n&&(s=t.nc(e),e+=2);var a=this.yg(i);if(void 0===a)return e;if(a.Ib=!1,!a.Hb)return e;var h=this.yg(i);if(n&&void 0!==h&&h.Hb)if(s===this.o.fb.Te){var l=this.o.N.yf(),p=a.zg(l.x,l.y);Math.max(0,1-p.distance/(.5*this.o.jb));p.distance<.5*this.o.jb&&getApp().s.H.wb.nf.He(r)}else if(i===this.o.fb.Te);else{var u=this.o.N.yf(),c=a.zg(u.x,u.y);Math.max(0,1-c.distance/(.5*this.o.jb))}else if(i===this.o.fb.Te);else{var f=this.o.N.yf(),d=a.zg(f.x,f.y);Math.max(0,1-d.distance/(.5*this.o.jb))}return e},t.prototype.rg=function(t,e){var i=t.nc(e);e+=2;var o=i===this.o.fb.Te?null:this.o.hb[i],n=t.mc(e);e+=1;var r=!!(1&n);if(!!(2&n)){var s=t.pc(e);e+=4,o&&o.Ag(s)}var a=this.Bg(t.mc(e++),t.mc(e++),t.mc(e++)),h=this.Bg(t.mc(e++),t.mc(e++),t.mc(e++));if(o){o.Cg(a,h,r);var l=this.o.N.yf(),p=o.yf(),u=Math.max(0,1-Math.hypot(l.x-p.x,l.y-p.y)/(.5*this.o.jb));getApp().r.Zd(u,i,r)}var c=this.ig(t,e);if(e+=this.jg(c),o)for(var f in o.xf){var d=o.xf[f];d&&(d.sc=!1)}for(var g=0;g<c;g++){var y=t.mc(e);e++;var w=t.mc(e);if(e++,o){var v=o.xf[y];v||(v=o.xf[y]=new Ability(y)),v.sc=!0,v.tc=Math.min(1,Math.max(0,w/100))}}return e},t.prototype.sg=function(t,e){var i=this.o.N,o=t.mc(e);e+=1;var n=!!(1&o),r=!!(2&o),s=!!(4&o);if(r){var a=i.M;i.Ag(t.pc(e)),e+=4,a=i.M-a,a>0&&getApp().s.H.wb.nf.Ge(a)}s&&(this.o.ib=t.pc(e),e+=4);var h=this.Bg(t.mc(e++),t.mc(e++),t.mc(e++)),l=this.Bg(t.mc(e++),t.mc(e++),t.mc(e++));i.Cg(h,l,n),getApp().r.Zd(.5,this.o.fb.Te,n);var p=this.ig(t,e);e+=this.jg(p);for(var u in i.xf){var c=i.xf[u];c&&(c.sc=!1)}for(var f=0;f<p;f++){var d=t.mc(e);e++;var g=t.mc(e);e++;var y=i.xf[d];y||(y=new Ability(d),i.xf[d]=y),y.sc=!0,y.tc=Math.min(1,Math.max(0,g/100))}getApp().s.H.wb.lf.Ie(i.xf)},t.prototype.pg=function(t,e){var i=this,o=t.nc(e);e+=2;var n=this.yg(o),r=t.pc(e);e+=4;var s=this.ig(t,e);if(e+=this.jg(s),n){n.Ag(r),n.Dg(function(){return i.Bg(t.mc(e++),t.mc(e++),t.mc(e++))},s),n.Eg(!0);var a=this.o.N.yf(),h=n.yf(),l=Math.max(0,1-Math.hypot(a.x-h.x,a.y-h.y)/(.5*this.o.jb));getApp().r.Xd(l,o)}else e+=6*s;return e},t.prototype.qg=function(t,e){var i=t.nc(e);e+=2;var o=this.o.hb[i];return o&&o.Ib&&o.Eg(!1),getApp().r.Yd(i),e},t.prototype.kg=function(t,e){var i=new Portion.Config;i.Lb=t.oc(e),e+=4,i.Wf=this.o.fb.Se===GameMode.Re?t.mc(e++):GameParams.TEAM_DEFAULT,i.Fg=this.Bg(t.mc(e++),t.mc(e++),t.mc(e++)),i.Xf=t.mc(e++);var o=this.o.gb[i.Lb];null!=o&&o.Kb();var n=new Portion(i,getApp().s.H.wb);return n.Gg(this.Hg(i.Lb),this.Ig(i.Lb),!0),this.o.gb[i.Lb]=n,e},t.prototype.lg=function(t,e){var i=t.oc(e);e+=4;var o=this.o.gb[i];return o&&(o.Jg=0,o.Kg=1.5*o.Kg,o.Nb=!0),e},t.prototype.mg=function(t,e){var i=t.oc(e);e+=4;var o=t.nc(e);e+=2;var n=this.o.gb[i];if(n){n.Jg=0,n.Kg=.1*n.Kg,n.Nb=!0;var r=this.yg(o);if(r&&r.Hb){var s=(this.o.fb.Te,r.yf());n.Gg(s.x,s.y,!1)}}return e};var e=[34,29,26,24,22,20,18,17,15,14,13,12,11,10,9,8,8,7,6,6,5,5,4,4,3,3,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,4,4,5,5,6,6,7,8,8,9,10,11,12,13,14,15,17,18,20,22,24,26,29,34];return t.prototype.eg=function(t){for(var i=getApp().q.Mg.Lg,o=i.getImageData(0,0,80,80),n=e[0],r=80-n,s=0,a=0;a<628;a++)for(var h=t.mc(1+a),l=0;l<8;l++){var p=0!=(h>>l&1),u=4*(n+80*s);p?(o.data[u]=255,o.data[u+1]=255,o.data[u+2]=255,o.data[u+3]=255):o.data[u+3]=0,++n>=r&&++s<80&&(n=e[s],r=80-n)}i.putImageData(o,0,0);var c=getApp().s.H.wb.kf.Kf;c.texture=getApp().q.Mg.Hc,c.texture.update()},t.prototype.gg=function(t,e){var i=t.oc(e);e+=4,console.log("Wormy Error: "+i)},t.prototype.hg=function(t,e){console.log("g.o"),this.o.Rb()},t.prototype.fg=function(t,e){this.o.tb=t.nc(e),e+=2,this.o.O=t.nc(e),e+=2;var i=new ScoreTableModel;i.Uf=[];for(var o=t.mc(e++),n=0;n<o;n++){var r=t.nc(e);e+=2;var s=t.pc(e);e+=4,i.Uf.push(ScoreTableModel.Ng(r,s))}if(i.Sf=[],this.o.fb.Se===GameMode.Re)for(var a=t.mc(e++),h=0;h<a;h++){var l=t.mc(e);e+=1;var p=t.pc(e);e+=4,i.Sf.push(ScoreTableModel.Og(l,p))}getApp().s.H.wb.mf.Ie(i)},t.prototype.yg=function(t){return t===this.o.fb.Te?this.o.N:this.o.hb[t]},t.prototype.Bg=function(t,e,i){return 1e4*((16777215&(255&i|e<<8&65280|t<<16&16711680))/8388608-1)},t.prototype.Hg=function(t){return((65535&t)/32768-1)*this.o.fb.We()},t.prototype.Ig=function(t){return((t>>16&65535)/32768-1)*this.o.fb.We()},t.prototype.ig=function(t,e){var i=t.mc(e);if(0==(128&i))return i;var o=t.mc(e+1);if(0==(128&o))return o|i<<7&16256;var n=t.mc(e+2);if(0==(128&n))return n|o<<7&16256|i<<14&2080768;var r=t.mc(e+3);return 0==(128&r)?r|n<<7&16256|o<<14&2080768|i<<21&266338304:void 0},t.prototype.jg=function(t){return t<128?1:t<16384?2:t<2097152?3:t<268435456?4:void 0},t}(),Optional=function(){function t(t){this.Pg=t}return t.Qg=function(){return new Optional(null)},t.Rg=function(t){return new Optional(t)},t.prototype.Sg=function(){return this.Pg},t.prototype.Tg=function(){return null!=this.Pg},t.prototype.Ug=function(t){null!=this.Pg&&t(this.Pg)},t}(),Portion=function(){function t(t,e){this.Mb=t,this.Vg=t.Xf>=80,this.Ob=0,this.Pb=0,this.Wg=0,this.Xg=0,this.Kg=this.Vg?1:t.Fg,this.Jg=1,this.Nb=!1,this.Yg=0,this.Zg=0,this.Jb=1,this.ve=2*Math.PI*Math.random(),this.$g=new PortionSpriteTree,this.$g._g(getApp().o.fb.Se,this.Mb.Wf===GameParams.TEAM_DEFAULT?null:getApp().p.Dc().ed(this.Mb.Wf),getApp().p.Dc().kd(this.Mb.Xf)),e.Df(t.Lb,this.$g)}return t.prototype.Kb=function(){this.$g.Gf.Hf.ah(),this.$g.Gf.Ff.ah()},t.prototype.Gg=function(t,e,i){this.Ob=t,this.Pb=e,i&&(this.Wg=t,this.Xg=e)},t.prototype.Fb=function(t,e){var i=Math.min(.5,1*this.Kg),o=Math.min(2.5,1.5*this.Kg);this.Yg=timeDeltaIncrement(this.Yg,i,e,.0025),this.Zg=timeDeltaIncrement(this.Zg,o,e,.0025),this.Jb=timeDeltaIncrement(this.Jb,this.Jg,e,.0025)},t.prototype.Gb=function(t,e,i){this.Wg=timeDeltaIncrement(this.Wg,this.Ob,e,.0025),this.Xg=timeDeltaIncrement(this.Xg,this.Pb,e,.0025),this.$g.Ie(this,t,e,i)},t.Config=function(){function t(){this.Lb=0,this.Wf=GameParams.TEAM_DEFAULT,this.Fg=0,this.Xf=0}return t}(),t}(),PortionSpriteTree=function(){function t(){this.Gf=new o(new WMSprite,new WMSprite),this.Gf.Hf.bh.blendMode=POGL.ic.jc,this.Gf.Hf.bh.zIndex=i,this.Gf.Ff.bh.zIndex=e}var e=500,i=100;t.prototype._g=function(t,e,i){var o=i.Zc;null!=o&&this.Gf.Ff.ch(o);var n=t==GameMode.Re&&null!=e?e.cd.$c:i.$c;null!=n&&this.Gf.Hf.ch(n)},t.prototype.Ie=function(t,e,i,o){if(!o(t.Wg,t.Xg))return void this.Gf.dh();var n=t.Zg*(1+.3*Math.cos(t.ve+e/200));t.Vg?this.Gf.eh(t.Wg,t.Xg,2*t.Yg,1*t.Jb,1.2*n,.8*t.Jb):this.Gf.eh(t.Wg,t.Xg,2*t.Yg,1*t.Jb,2*n,.3*t.Jb)};var o=function(){function t(t,e){this.Ff=t,this.Hf=e}return t.prototype.eh=function(t,e,i,o,n,r){this.Ff.Eg(!0),this.Ff.fh(t,e),this.Ff.gh(i),this.Ff.hh(o),this.Hf.Eg(!0),this.Hf.fh(t,e),this.Hf.gh(n),this.Hf.hh(r)},t.prototype.dh=function(){this.Ff.Eg(!1),this.Hf.Eg(!1)},t}();return t}(),PropertyManager=function(){function t(){this.ih=0,this.jh=0,this.kh=0,this.lh=0,this.mh=0,this.nh=[]}function e(t,e){if(!getApp().p.W())return null;var o=getApp().p.Ac();if(e===PropertyType.ia){var n=i(o.skinArrayDict,t);return n<0?null:o.skinArrayDict[n]}switch(e){case PropertyType.ja:return o.eyesDict[t];case PropertyType.ka:return o.mouthDict[t];case PropertyType.la:return o.glassesDict[t];case PropertyType.ma:return o.hatDict[t]}return null}function i(t,e){for(var i=0;i<t.length;i++)if(t[i].id==e)return i;return-1}return t.prototype.a=function(){},t.prototype.ha=function(t){switch(t){case PropertyType.ia:return this.ih;case PropertyType.ja:return this.jh;case PropertyType.ka:return this.kh;case PropertyType.la:return this.lh;case PropertyType.ma:return this.mh}return 0},t.prototype.oh=function(t){this.nh.push(t),this.qh()},t.prototype.Ia=function(){if(!getApp().p.W())return any([32,33,34,35]);for(var t=getApp().p.Ac(),e=[],i=0;i<t.skinArrayDict.length;i++){var o=t.skinArrayDict[i];this.Ja(o.id,PropertyType.ia)&&e.push(o)}return 0===e.length?0:e[parseInt(e.length*Math.random())].id},t.prototype.rh=function(){if(getApp().p.W){var t=getApp().p.Ac().skinArrayDict,e=i(t,this.ih);if(!(e<0)){for(var o=e+1;o<t.length;o++)if(this.Ja(t[o].id,PropertyType.ia))return this.ih=t[o].id,void this.qh();for(var n=0;n<e;n++)if(this.Ja(t[n].id,PropertyType.ia))return this.ih=t[n].id,void this.qh()}}},t.prototype.sh=function(){if(getApp().p.W){var t=getApp().p.Ac().skinArrayDict,e=i(t,this.ih);if(!(e<0)){for(var o=e-1;o>=0;o--)if(this.Ja(t[o].id,PropertyType.ia))return this.ih=t[o].id,void this.qh();for(var n=t.length-1;n>e;n--)if(this.Ja(t[n].id,PropertyType.ia))return this.ih=t[n].id,void this.qh()}}},t.prototype.th=function(t,e){if(!getApp().p.W()||this.Ja(t,e))switch(e){case PropertyType.ia:return void(this.ih!=t&&(this.ih=t,this.qh()));case PropertyType.ja:return void(this.jh!=t&&(this.jh=t,this.qh()));case PropertyType.ka:return void(this.kh!=t&&(this.kh=t,this.qh()));case PropertyType.la:return void(this.lh!=t&&(this.lh=t,this.qh()));case PropertyType.ma:return void(this.mh!=t&&(this.mh=t,this.qh()))}},t.prototype.Ja=function(t,i){var o=e(t,i);return null!=o&&(getApp().u.P()?0==o.price&&!o.nonbuyable||getApp().u.uh(t,i):o.guest)},t.prototype.qh=function(){for(var t=0;t<this.nh.length;t++)this.nh[t]()},t}(),PropertyType=function(){function t(){}return t.ia="SKIN",t.ja="EYES",t.ka="MOUTH",t.la="GLASSES",t.ma="HAT",t}(),Region=function(){function t(t,e,i,o,n,r,s,a,h){this.Hc=new POGL._b(t,new POGL.dc(e,i,o,n)),this.vh=e,this.wh=i,this.xh=o,this.yh=n,this.zh=r||(a||o)/2,this.Ah=s||(h||n)/2,this.Bh=a||o,this.Ch=h||n,this.Dh=.5-(this.zh-.5*this.Bh)/this.xh,this.Eh=.5-(this.Ah-.5*this.Ch)/this.yh,this.Fh=this.xh/this.Bh,this.Gh=this.yh/this.Ch}return t}(),ResourceManager=function(){function t(){this.Ae=[],this.uf=new POGL._b(o),this.vf=new POGL._b(n),this.sf=new POGL._b(r),this.Hh=new Region(s,158,86,67,124,148,63.5,128,128),this.Ih=new Region(s,158,4,87,74,203,63.5,128,128),this.Jh=new Region(s,4,4,146,146,63.5,63.5,128,128),this.Mg=function(){var t=window.document.createElement("canvas");return t.width=80,t.height=80,{Xe:t,Lg:t.getContext("2d"),Hc:new POGL._b(POGL.$b.from(t))}}(),this.Bd={},this.yd={},this.Kh=[],this.Lh=null}function e(t,e,i,o){var n=parseInt(o.substring(1,3),16),r=parseInt(o.substring(3,5),16),s=parseInt(o.substring(5,7),16),a=window.document.createElement("canvas");a.width=e,a.height=i;var h=a&&a.getContext?a.getContext("2d"):null;h.clearRect(0,0,e,i),h.drawImage(t,0,0,e,i);for(var l=h.getImageData(0,0,e,i),p=e*i,u=0;u<p;u++)l.data[4*u]*=n/256,l.data[4*u+1]*=r/256,l.data[4*u+2]*=s/256;return h.putImageData(l,0,0),a}function i(t,e){for(var i=t.length,o=new Array(t.length),n=0;n<t.length;n++){var r=o[n]=new Image;r.onload=function(){0==--i&&e(o)},r.src=t[n]}}var o=function(){var t=POGL.$b.from("/images/bg-pattern-pow2-ARENA.png");return t.wrapMode=POGL.kc.lc,t}(),n=function(){var t=POGL.$b.from("/images/bg-pattern-pow2-TEAM2.png");return t.wrapMode=POGL.kc.lc,t}(),r=POGL.$b.from("/images/lens.png"),s=POGL.$b.from("/images/wear-ability.png");return t.prototype.a=function(t){function o(){0==--r&&t()}var n=this,r=5;i(["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABwUlEQVRIS73VB2sWQRDG8d/aoth7R7HEgt//k4hdUexGjSaR2OLKI3PhXmMB4RwYbt/b9+a/88zsbjOxtb/F773nP5tGnk++Dd5a63+K8VtA7z1Bt2Ib5mq8uYKt4Qs+4XPGrbVAN9gvAb33LdiBXeU7sR15H/uKj/iAlfLV1lrez9gGQO89q96NfTiA/diLQDIXy+oT/D0W8RbvsNxay9y6zQBq5XtwEEdxDEcKFGikikWa5Qr8Ci/wEm+wNM5kHVCaZ5WHcQKnyzM+hIDHgCW8xjM8Ls94IdkNNRkD8nEkOYmzOFfPUwUNIAWPpbABJNgTPMSDej5NZq21ZOkHoFoxBY0kCX4R8wUJIBlkflyDFDcZBJDgd3C3IJFsJS08ANJ+KWaCXcDl8vOVUebSVWndWFpytQqcFd/HrfJ7BV1sra0NgKwsqzyDS7iKKwjgeOk/7IGhQ7IXItPzAtzEDdzGo2SXjhoA0T/FjTxZ/bUCpA6RLcX/uaWzg9OqkSMSBXC9skhNFlKH/waYXKLJixyppmvT2gvTbbQCpMenOyoKkuN4msNu2D2THtcjyHQXzggy3ZU5vpEmu/Rnb9Z///UddRYCKBhTvLwAAAAASUVORK5CYII="],function(t){var i=t[0],r=new Array(9);r[0]=e(i,8,8,"#ff66aa"),r[1]=e(i,8,8,"#ff8888"),r[2]=e(i,8,8,"#ffaa66"),r[3]=e(i,8,8,"#aaff66"),r[4]=e(i,8,8,"#88ff88"),r[5]=e(i,8,8,"#66ffaa"),r[6]=e(i,8,8,"#66aaff"),r[7]=e(i,8,8,"#8888ff"),r[8]=e(i,8,8,"#aa66ff"),n.Ae=r,o()}),this.Bd={},o(),this.yd={},o(),o(),this.Kh=[],o(),this.Lh=null},t}(),ScenesManager=function(){function t(){this.H=new GameViewController,this.F=new MainMenuViewController,this.Mh=new WithdrawConsentViewController,this.Nh=new CoinsViewController,this.Oh=new LeadersViewController,this.Ph=new ProfileViewController,this.Qh=new LoginViewController,this.xa=new SettingsViewController,this.Rh=new SkinsViewController,this.Sh=new StoreViewController,this.Th=new WearViewController,this.aa=new ToasterContainerViewController,this.ua=new LoadingViewController,this.pa=new PrerollViewController,this.Uh=[],this.Vh=null}function e(t,e){if(0!=e){var i=t[e];arraycopy(t,0,1,e),t[0]=i}}function i(t,e){if(e!=t.length+1){var i=t[e];arraycopy(t,e+1,e,t.length-e-1),t[t.length-1]=i}}function o(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1}return t.prototype.a=function(){this.Uh=[this.H,this.F,this.Mh,this.Nh,this.Oh,this.Ph,this.Qh,this.xa,this.Rh,this.Sh,this.Th,this.aa,this.ua,this.pa];for(var t=0;t<this.Uh.length;t++)this.Uh[t].a();this.Vh=new BackgroundView(BaseViewController.Wh)},t.prototype.Qa=function(t,e){for(var i=this.Uh.length-1;i>=0;i--)this.Uh[i].Pa(t,e);this.Uh[0]!=this.H&&this.Uh[0]!=this.pa&&null!=this.Vh&&this.Vh.Pa(t,e)},t.prototype.Ra=function(){for(var t=this.Uh.length-1;t>=0;t--)this.Uh[t].Ra();null!=this.Vh&&this.Vh.Ra()},t.prototype.I=function(t){var i=o(this.Uh,t);if(!(i<0)){this.Uh[0].Xh(),e(this.Uh,i),this.Yh()}},t.prototype.Zh=function(){this.Uh[0].Xh();do{i(this.Uh,0)}while(this.Uh[0].rc!=ViewControllerType.$h);this.Yh()},t.prototype.Yh=function(){var t=this.Uh[0];t._h(),t.ai(),this.bi()},t.prototype.ci=function(){return 0!=this.Uh.length&&(this.Uh[0].rc==ViewControllerType.$h&&this.aa.di())},t.prototype.bi=function(){this.ci()&&this.I(this.aa)},t}(),ScoreTableModel=function(){function t(){this.Uf=[],this.Sf=[]}return t.Ng=function(t,e){return{Vf:t,M:e}},t.Og=function(t,e){return{Tf:t,M:e}},t}(),UserManager=function(){function t(){this.ei=[],this.fi=[],this.gi=[],this.hi=!1,this.ii=e,this.ji={},this.ki=null}var e="guest";return t.prototype.a=function(){this.li()},t.prototype.X=function(){return this.hi?this.ji.userId:""},t.prototype.mi=function(){return this.hi?this.ji.username:""},t.prototype.ga=function(){return this.hi?this.ji.nickname:""},t.prototype.ni=function(){return this.hi?this.ji.avatarUrl:GUEST_AVATAR_URL},t.prototype.oi=function(){return this.hi&&this.ji.isBuyer},t.prototype.Z=function(){return this.hi&&this.ji.isConsentGiven},t.prototype.pi=function(){return this.hi?this.ji.coins:0},t.prototype.qi=function(){return this.hi?this.ji.level:1},t.prototype.ri=function(){return this.hi?this.ji.expOnLevel:0},t.prototype.si=function(){return this.hi?this.ji.expToNext:50},t.prototype.ti=function(){return this.hi?this.ji.skinId:0},t.prototype.vi=function(){return this.hi?this.ji.eyesId:0},t.prototype.wi=function(){return this.hi?this.ji.mouthId:0},t.prototype.xi=function(){return this.hi?this.ji.glassesId:0},t.prototype.yi=function(){return this.hi?this.ji.hatId:0},t.prototype.zi=function(){return this.hi?this.ji.highScore:0},t.prototype.Ai=function(){return this.hi?this.ji.bestSurvivalTimeSec:0},t.prototype.Bi=function(){return this.hi?this.ji.kills:0},t.prototype.Ci=function(){return this.hi?this.ji.headShots:0},t.prototype.Di=function(){return this.hi?this.ji.sessionsPlayed:0},t.prototype.Ei=function(){return this.hi?this.ji.totalPlayTimeSec:0},t.prototype.Fi=function(){return this.hi?this.ji.regDate:{}},t.prototype.V=function(t){this.ei.push(t),t()},t.prototype.Gi=function(t){this.fi.push(t),t()},t.prototype.Hi=function(t){this.gi.push(t)},t.prototype.uh=function(t,e){var i=this.ji.propertyList;if(!i)return!1;for(var o=0;o<i.length;o++){var n=i[o];if(n.id==t&&n.type===e)return!0}return!1},t.prototype.P=function(){return this.hi},t.prototype.ea=function(){return this.ii},t.prototype.Q=function(t){var e=this;this.hi&&this.Ii(function(i){if(i){var o=e.pi(),n=e.qi();e.ji=i,e.Ji();var r=e.pi(),s=e.qi();s>1&&s!=n&&getApp().s.aa.Ki(new LevelUpToasterViewController(s));var a=r-o;a>=20&&getApp().s.aa.Ki(new CoinsToasterViewController(a))}t&&t()})},t.prototype.Ii=function(t){$.get(GATEWAY_HOST+"/pub/wuid/"+this.ii+"/getUserData",function(e){t(e.user_data)})},t.prototype.Li=function(t,e,i){var o=this;$.get(GATEWAY_HOST+"/pub/wuid/"+this.ii+"/buyProperty?id="+t+"&type="+e,function(t){1200==t.code?o.Q(i):i()}).fail(function(){i()})},t.prototype.Mi=function(){var t=this;if(this.Ni(),"undefined"==typeof FB)return void this.Oi();FB.getLoginStatus(function(e){if("connected"===e.status)return void(e.authResponse&&e.authResponse.accessToken?t.Pi("facebook","fb_"+e.authResponse.accessToken):t.Oi());FB.login(function(e){"connected"===e.status&&e.authResponse&&e.authResponse.accessToken?t.Pi("facebook","fb_"+e.authResponse.accessToken):t.Oi()})})},t.prototype.Qi=function(){var t=this;if(this.Ni(),void 0===GoogleAuth)return void this.Oi();console.log("gsi:l"),GoogleAuth.then(function(){if(console.log("gsi:then"),GoogleAuth.isSignedIn.get()){console.log("gsi:sil");var e=GoogleAuth.currentUser.get();return void t.Pi("google","gg_"+e.getAuthResponse().id_token)}GoogleAuth.signIn().then(function(e){return void 0!==e.error?(console.log("gsi:e: "+e.error),void t.Oi()):e.isSignedIn()?(console.log("gsi:s"),void t.Pi("google","gg_"+e.getAuthResponse().id_token)):(console.log("gsi:c"),void t.Oi())})})},t.prototype.Ni=function(){console.log("iSI: "+this.hi);var t=this.ii,i=this.ki;switch(this.hi=!1,this.ii=e,this.ji={},this.ki=null,setCookie(Cookies.De,"",60),i){case"facebook":this.Ri();break;case"google":this.Si()}t!==this.ii?this.Ti():this.Ji()},t.prototype.li=function(){console.log("rs");var t=getCookie(Cookies.De),e=this;"facebook"==t?(console.log("rs:fb"),function t(){"undefined"!=typeof FB?e.Mi():setTimeout(t,100)}()):"google"==t?(console.log("rs:gg"),function t(){void 0!==GoogleAuth?e.Qi():setTimeout(t,100)}()):(console.log("rs:lo"),this.Ni())},t.prototype.Ti=function(){for(var t=0;t<this.ei.length;t++)this.ei[t]();this.Ji()},t.prototype.Ji=function(){for(var t=0;t<this.fi.length;t++)this.fi[t]();var e=this.gi;this.gi=[];for(var i=0;i<e.length;i++)e[i]()},t.prototype.Pi=function(t,e){var i=this;$.get(GATEWAY_HOST+"/pub/wuid/"+e+"/login",function(o){if(o&&o.user_data){var n=this.ii;i.hi=!0,i.ii=e,i.ji=o.user_data,i.ki=t,setCookie(Cookies.De,i.ki,60),n!==e?i.Ti():i.Ji()}else i.Oi()}).fail(function(){i.Oi()})},t.prototype.Oi=function(){this.Ni()},t.prototype.Ri=function(){console.log("lo:fb"),FB.logout(function(){})},t.prototype.Si=function(){console.log("lo:gg"),GoogleAuth.signOut()},t}(),WMGameBackgroundSprite=function(){function t(){this.Ui={},this.Ui[r]=[1,.5,.25,.5],this.Ui[s]=POGL._b.WHITE,this.Ui[a]=[0,0],this.Ui[h]=[0,0];var t=POGL.cc.from(u,c,this.Ui);this.rf=new POGL.hc(p,t)}var e="a1_"+randStr(),i="a2_"+randStr(),o=atob("dHJhbnNsYXRpb25NYXRyaXg="),n=atob("cHJvamVjdGlvbk1hdHJpeA=="),r="u3_"+randStr(),s="u4_"+randStr(),a="u5_"+randStr(),h="u6_"+randStr(),l="v1_"+randStr(),p=(new POGL.gc).addAttribute(e,[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5],2).addAttribute(i,[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5],2),u=atob("cHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7YXR0cmlidXRlIHZlYzIg")+e+atob("O2F0dHJpYnV0ZSB2ZWMyIA==")+i+atob("O3VuaWZvcm0gbWF0MyA=")+o+atob("O3VuaWZvcm0gbWF0MyA=")+n+atob("O3ZhcnlpbmcgdmVjMiA=")+l+atob("O3ZvaWQgbWFpbigpew==")+l+atob("PQ==")+i+atob("O2dsX1Bvc2l0aW9uPXZlYzQoKA==")+n+atob("Kg==")+o+atob("KnZlYzMo")+e+atob("LDEuMCkpLnh5LDAuMCwxLjApO30="),c=atob("cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3ZhcnlpbmcgdmVjMiA=")+l+atob("O3VuaWZvcm0gdmVjNCA=")+r+atob("O3VuaWZvcm0gc2FtcGxlcjJEIA==")+s+atob("O3VuaWZvcm0gdmVjMiA=")+a+atob("O3VuaWZvcm0gdmVjMiA=")+h+atob("O3ZvaWQgbWFpbigpe3ZlYzIgY29vcmQ9")+l+atob("Kg==")+a+atob("Kw==")+h+atob("O3ZlYzQgdl9jb2xvcl9taXg9")+r+atob("O2dsX0ZyYWdDb2xvcj10ZXh0dXJlMkQo")+s+atob("LGNvb3JkKSowLjMrdl9jb2xvcl9taXguYSp2ZWM0KHZfY29sb3JfbWl4LnJnYiwwLjApO30=");return t.prototype.zf=function(t,e,i,o){var n=this.Ui[r];n[0]=t,n[1]=e,n[2]=i,n[3]=o},t.prototype.tf=function(t){this.Ui[s]=t},t.prototype.Ie=function(t,e,i,o){this.rf.position.x=t,this.rf.position.y=e,this.rf.scale.x=i,this.rf.scale.y=o;var n=this.Ui[a];n[0]=.2520615384615385*i,n[1]=.4357063736263738*o;var r=this.Ui[h];r[0]=.2520615384615385*t,r[1]=.4357063736263738*e},t}(),WMSprite=function(){function t(){this.bh=new POGL.ec,this.Vi=0,this.Wi=0}return t.prototype.ch=function(t){this.bh.texture=t.Hc,this.bh.anchor.set(t.Dh,t.Eh),this.Vi=t.Fh,this.Wi=t.Gh},t.prototype.gh=function(t){this.bh.width=t*this.Vi,this.bh.height=t*this.Wi},t.prototype.Xi=function(t){this.bh.rotation=t},t.prototype.fh=function(t,e){this.bh.position.set(t,e)},t.prototype.Eg=function(t){this.bh.visible=t},t.prototype.Yi=function(){return this.bh.visible},t.prototype.hh=function(t){this.bh.alpha=t},t.prototype.Ef=function(){return this.bh},t.prototype.ah=function(){pixijs_removeFromParent(this.bh)},t}(),Worm=function(){function t(t){this.fb=t,this.Mb=new Worm.Config,this.Hb=!1,this.Ib=!0,this.Zi=!1,this.Db=0,this.$i=0,this.Jb=1,this._i=0,this.M=0,this.xf={},this.aj=0,this.bj=new Float32Array(2*e),this.cj=new Float32Array(2*e),this.dj=new Float32Array(2*e),this.ej=null,this.fj=null,this.gj=null,this.Tb()}var e=200;return t.prototype.Kb=function(){null!=this.fj&&pixijs_removeFromParent(this.fj.Jf),null!=this.gj&&pixijs_removeFromParent(this.gj)},t.prototype.Tb=function(){this.Ag(.25),this.Mb.ad="",this.Ib=!0,this.xf={},this.Eg(!1)},t.prototype.xg=function(t){this.Mb=t,this.hj(this.Hb)},t.prototype.Eg=function(t){var e=this.Hb;this.Hb=t,this.hj(e)},t.prototype.Ag=function(t){this.M=50*t;var i=t;t>this.fb.Ue&&(i=Math.atan((t-this.fb.Ue)/this.fb.Ve)*this.fb.Ve+this.fb.Ue);var o=Math.sqrt(4*Math.pow(5*i,.707106781186548)+25),n=Math.min(e,Math.max(3,5*(o-5)+1)),r=this.aj;if(this.Db=.025*(5+.9*o),this.aj=Math.floor(n),this.$i=n-this.aj,r>0&&r<this.aj)for(var s=this.bj[2*r-2],a=this.bj[2*r-1],h=this.cj[2*r-2],l=this.cj[2*r-1],p=this.dj[2*r-2],u=this.dj[2*r-1],c=r;c<this.aj;c++)this.bj[2*c]=s,this.bj[2*c+1]=a,this.cj[2*c]=h,this.cj[2*c+1]=l,this.dj[2*c]=p,this.dj[2*c+1]=u},t.prototype.Dg=function(t,e){this.aj=e;for(var i=0;i<this.aj;i++)this.bj[2*i]=this.cj[2*i]=this.dj[2*i]=t(),this.bj[2*i+1]=this.cj[2*i+1]=this.dj[2*i+1]=t()},t.prototype.Cg=function(t,e,i){this.Zi=i;for(var o=0;o<this.aj;o++)this.bj[2*o]=this.cj[2*o],this.bj[2*o+1]=this.cj[2*o+1];var n=t-this.cj[0],r=e-this.cj[1];this.ij(n,r,this.aj,this.cj)},t.prototype.ij=function(t,e,i,o){var n=Math.hypot(t,e);if(!(n<=0)){var r=o[0],s=void 0;o[0]+=t;var a=o[1],h=void 0;o[1]+=e;for(var l=this.Db/(this.Db+n),p=1-2*l,u=1,c=i-1;u<c;u++)s=o[2*u],o[2*u]=o[2*u-2]*p+(s+r)*l,r=s,h=o[2*u+1],o[2*u+1]=o[2*u-1]*p+(h+a)*l,a=h;l=this.$i*this.Db/(this.$i*this.Db+n),p=1-2*l,o[2*i-2]=o[2*i-4]*p+(o[2*i-2]+r)*l,o[2*i-1]=o[2*i-3]*p+(o[2*i-1]+a)*l}},t.prototype.yf=function(){return{x:this.dj[0],y:this.dj[1]}},t.prototype.zg=function(t,e){for(var i=1e6,o=t,n=e,r=0;r<this.aj;r++){var s=this.dj[2*r],a=this.dj[2*r+1],h=Math.hypot(t-s,e-a);h<i&&(i=h,o=s,n=a)}return{x:o,y:n,distance:i}},t.prototype.vb=function(t){this.ej=t},t.prototype.Fb=function(t,e){this.Jb=timeDeltaIncrement(this.Jb,this.Ib?this.Zi?.9+.1*Math.cos(t/400*Math.PI):1:0,e,1/800),this._i=timeDeltaIncrement(this._i,this.Ib?this.Zi?1:0:1,e,.0025),null!=this.fj&&(this.fj.Jf.alpha=this.Jb),null!=this.gj&&(this.gj.alpha=this.Jb)},t.prototype.Gb=function(t,e,i,o){if(this.Hb&&this.Ib)for(var n=Math.pow(.11112,e/95),r=0;r<this.aj;r++){var s=lerp(this.bj[2*r],this.cj[2*r],i),a=lerp(this.bj[2*r+1],this.cj[2*r+1],i);this.dj[2*r]=lerp(s,this.dj[2*r],n),this.dj[2*r+1]=lerp(a,this.dj[2*r+1],n)}null!=this.fj&&this.Hb&&this.fj.jj(this,t,e,o),null!=this.gj&&(this.gj.Af.x=this.dj[0],this.gj.Af.y=this.dj[1]-3*this.Db)},t.prototype.hj=function(t){this.Hb?t||this.kj():(null!=this.fj&&pixijs_removeFromParent(this.fj.Jf),null!=this.gj&&pixijs_removeFromParent(this.gj))},t.prototype.kj=function(){var t=getApp();null==this.fj?this.fj=new WormSpriteTree:pixijs_removeFromParent(this.fj.Jf),this.fj._g(t.o.fb.Se,t.p.Dc().ed(this.Mb.Wf),t.p.Dc().dd(this.Mb.Xf),t.p.Dc().fd(this.Mb.tg),t.p.Dc().gd(this.Mb.ug),t.p.Dc().hd(this.Mb.vg),t.p.Dc().jd(this.Mb.wg)),null==this.gj?(this.gj=new WormLabelNode(""),this.gj.style.fontFamily="PTSans",this.gj.anchor.set(.5)):pixijs_removeFromParent(this.gj),this.gj.style.fontSize=14,this.gj.style.fill=t.p.Dc().dd(this.Mb.Xf)._c,this.gj.text=this.Mb.ad,this.ej.If(this.Mb.Lb,this.fj,this.gj)},t.Config=function(){function t(){this.Lb=0,this.Wf=GameParams.TEAM_DEFAULT,this.Xf=0,this.tg=0,this.ug=0,this.vg=0,this.wg=0,this.ad=""}return t}(),t}(),WormLabelNode=function(){return extend(POGL.fc,function(t,e,i){POGL.fc.call(this,t,e,i),this.Af={x:0,y:0}})}(),WormSpriteTree=function(){function t(){this.Jf=new POGL.Zb,this.Jf.sortableChildren=!0,this.lj=new k,this.lj.zIndex=e*(2*(i+1)+1+3),this.mj=0,this.nj=new Array(i),this.nj[0]=this.oj(0,new WMSprite,new WMSprite)
;for(var t=1;t<i;t++)this.nj[t]=this.oj(t,new WMSprite,new WMSprite);this.pj=0,this.qj=0,this.rj=0}var e=.001,i=797,o=.1*Math.PI,n=-.06640625,r=.84375,s=.2578125,a=-.03515625,h=-.0625,l=.5625,p=3*n+r,u=s-3*n,c=n+a,f=.375,d=.75,g=h+h,y=3*a+s,w=r-3*a,v=a+n;t.prototype.oj=function(t,o,n){var r=new b(o,n);return o.bh.zIndex=e*(2*(i-t)+1+3),n.bh.zIndex=e*(2*(i-t)-2+3),r},t.prototype._g=function(t,e,i,o,n,r,s){var a=i.Zc,h=t==GameMode.Re?e.bd.$c:i.$c;if(a.length>0&&h.length>0)for(var l=0;l<this.nj.length;l++)this.nj[l].Ff.ch(a[l%a.length]),this.nj[l].Hf.ch(h[l%h.length]);this.lj._g(o,n,r,s)};var k=function(){var t=extend(POGL.Zb,function(){POGL.Zb.call(this),this.sortableChildren=!0,this.sj=[],this.tj=[],this.uj=[],this.vj=[],this.wj=new POGL.Zb,this.xj=[];for(var t=0;t<4;t++){var e=new WMSprite;e.ch(getApp().q.Hh),this.wj.addChild(e.bh),this.xj.push(e)}this.wj.zIndex=.0011,this.addChild(this.wj),this.yj(),this.zj=new WMSprite,this.zj.ch(getApp().q.Ih),this.zj.bh.zIndex=.001,this.addChild(this.zj.bh),this.Aj()});return t.prototype._g=function(t,e,i,o){this.Bj(.002,this.sj,t.Zc),this.Bj(.003,this.tj,e.Zc),this.Bj(.004,this.vj,o.Zc),this.Bj(.005,this.uj,i.Zc)},t.prototype.Bj=function(t,e,i){for(;i.length>e.length;){var o=new WMSprite;e.push(o),this.addChild(o.Ef())}for(;i.length<e.length;){e.pop().ah()}for(var n=t,r=0;r<i.length;r++){n+=1e-4;var s=e[r];s.ch(i[r]),s.bh.zIndex=n}},t.prototype.eh=function(t,e,i,o){this.visible=!0,this.position.set(t,e),this.rotation=o;for(var n=0;n<this.sj.length;n++)this.sj[n].gh(i);for(var r=0;r<this.tj.length;r++)this.tj[r].gh(i);for(var s=0;s<this.uj.length;s++)this.uj[s].gh(i);for(var a=0;a<this.vj.length;a++)this.vj[a].gh(i)},t.prototype.dh=function(){this.visible=!1},t.prototype.Cj=function(t,e,i,o){this.wj.visible=!0;for(var n=i/1e3,r=1/this.xj.length,s=0;s<this.xj.length;s++){var a=1-(n+r*s)%1;this.xj[s].bh.alpha=1-a,this.xj[s].gh(e*(.5+4.5*a))}},t.prototype.yj=function(){this.wj.visible=!1},t.prototype.Dj=function(t,e,i,o){this.zj.bh.visible=!0,this.zj.bh.alpha=timeDeltaIncrement(this.zj.bh.alpha,t.Zi?.9:.2,o,.0025),this.zj.gh(e)},t.prototype.Aj=function(){this.zj.bh.visible=!1},t}();t.prototype.Ej=function(t){return this.qj+this.rj*Math.sin(t*o-this.pj)},t.prototype.jj=function(t,e,i,o){var k=2*t.Db,m=t.dj,j=t.aj,C=4*j-3,A=C;this.pj=e/400*Math.PI,this.qj=1.5*k,this.rj=.15*k*t._i;var M=void 0,P=void 0,V=void 0,B=void 0,I=void 0,T=void 0,x=void 0,L=void 0;if(P=m[0],T=m[1],o(P,T)){V=m[2],x=m[3],B=m[4],L=m[5];var O=Math.atan2(L+2*T-3*x,B+2*P-3*V);this.lj.eh(P,T,k,O),this.nj[0].eh(P,T,k,this.Ej(0),O),this.nj[1].eh(p*P+u*V+c*B,p*T+u*x+c*L,k,this.Ej(1),b.angleBetween(this.nj[0],this.nj[2])),this.nj[2].eh(f*P+d*V+g*B,f*T+d*x+g*L,k,this.Ej(2),b.angleBetween(this.nj[1],this.nj[3])),this.nj[3].eh(y*P+w*V+v*B,y*T+w*x+v*L,k,this.Ej(3),b.angleBetween(this.nj[2],this.nj[4]))}else this.lj.dh(),this.nj[0].dh(),this.nj[1].dh(),this.nj[2].dh(),this.nj[3].dh();for(var S=4,D=2,E=2*j-4;D<E;D+=2)P=m[D],T=m[D+1],o(P,T)?(M=m[D-2],I=m[D-1],V=m[D+2],x=m[D+3],B=m[D+4],L=m[D+5],this.nj[S].eh(P,T,k,this.Ej(S),b.angleBetween(this.nj[S-1],this.nj[S+1])),S++,this.nj[S].eh(n*M+r*P+s*V+a*B,n*I+r*T+s*x+a*L,k,this.Ej(S),b.angleBetween(this.nj[S-1],this.nj[S+1])),S++,this.nj[S].eh(h*M+l*P+l*V+h*B,h*I+l*T+l*x+h*L,k,this.Ej(S),b.angleBetween(this.nj[S-1],this.nj[S+1])),S++,this.nj[S].eh(a*M+s*P+r*V+n*B,a*I+s*T+r*x+n*L,k,this.Ej(S),b.angleBetween(this.nj[S-1],this.nj[S+1])),S++):(this.nj[S].dh(),S++,this.nj[S].dh(),S++,this.nj[S].dh(),S++,this.nj[S].dh(),S++);for(P=m[2*j-4],T=m[2*j-3],o(P,T)?(M=m[2*j-6],I=m[2*j-5],V=m[2*j-2],x=m[2*j-1],this.nj[C-5].eh(P,T,k,this.Ej(C-5),b.angleBetween(this.nj[C-6],this.nj[C-4])),this.nj[C-4].eh(v*M+w*P+y*V,v*I+w*T+y*x,k,this.Ej(C-4),b.angleBetween(this.nj[C-5],this.nj[C-3])),this.nj[C-3].eh(g*M+d*P+f*V,g*I+d*T+f*x,k,this.Ej(C-3),b.angleBetween(this.nj[C-4],this.nj[C-2])),this.nj[C-2].eh(c*M+u*P+p*V,c*I+u*T+p*x,k,this.Ej(C-2),b.angleBetween(this.nj[C-3],this.nj[C-1])),this.nj[C-1].eh(V,x,k,this.Ej(C-1),b.angleBetween(this.nj[C-2],this.nj[C-1]))):(this.nj[C-5].dh(),this.nj[C-4].dh(),this.nj[C-3].dh(),this.nj[C-2].dh(),this.nj[C-1].dh()),0==this.mj&&A>0&&this.Jf.addChild(this.lj),this.mj>0&&0==A&&pixijs_removeFromParent(this.lj);this.mj<A;)this.Jf.addChild(this.nj[this.mj].Ff.Ef()),this.Jf.addChild(this.nj[this.mj].Hf.Ef()),this.mj+=1;for(;this.mj>A;)this.mj-=1,this.nj[this.mj].Hf.ah(),this.nj[this.mj].Ff.ah();var _=t.xf[Ability.MAGNETIC_TYPE];this.nj[0].Yi()&&null!=_&&_.sc?this.lj.Cj(t,k,e,i):this.lj.yj();var N=t.xf[Ability.VELOCITY_TYPE];this.nj[0].Yi()&&null!=N&&N.sc?this.lj.Dj(t,e,i):this.lj.Aj()};var b=function(){function t(t,e){this.Ff=t,this.Ff.Eg(!1),this.Hf=e,this.Hf.Eg(!1)}return t.prototype.eh=function(t,e,i,o,n){this.Ff.Eg(!0),this.Ff.fh(t,e),this.Ff.gh(i),this.Ff.Xi(n),this.Hf.Eg(!0),this.Hf.fh(t,e),this.Hf.gh(o),this.Hf.Xi(n)},t.prototype.dh=function(){this.Ff.Eg(!1),this.Hf.Eg(!1)},t.prototype.Yi=function(){return this.Ff.Yi()},t.angleBetween=function(t,e){return Math.atan2(t.Ff.bh.position.y-e.Ff.bh.position.y,t.Ff.bh.position.x-e.Ff.bh.position.x)},t}();return t}(),WormView=function(){function t(t){this.Fj=t,this.Xe=t.get()[0],this.Je=new POGL.ac({view:this.Xe,transparent:!0}),this.Gj=new WormSpriteTree,this.Gj.Jf.addChild(this.Gj.lj),this.Hj=0,this.Ij=0,this.Fg=1,this.ih=0,this.jh=0,this.kh=0,this.lh=0,this.mh=0,this.Jj=!1,this.Kj=!1,this.Lj=!1,this.Mj=!1,this.Nj=!1,this.Oj=!1,this.Pj=!1,this.Qj=!1,this.Rj=!1,this.Sj=!1,this.Ra(),this.Fb();var e=this;getApp().p.ca(function(){getApp().p.W()&&e.Fb()})}return t.prototype.Fb=function(){var t=getApp();this.Gj._g(GameMode.Qe,null,t.p.Dc().dd(this.ih),t.p.Dc().fd(this.jh),t.p.Dc().gd(this.kh),t.p.Dc().hd(this.lh),t.p.Dc().jd(this.mh))},t.prototype.Tj=function(t,e,i){this.ih=t,this.Jj=e,this.Oj=i,this.Fb()},t.prototype.Uj=function(t,e,i){this.jh=t,this.Kj=e,this.Pj=i,this.Fb()},t.prototype.Vj=function(t,e,i){this.kh=t,this.Lj=e,this.Qj=i,this.Fb()},t.prototype.Wj=function(t,e,i){this.lh=t,this.Mj=e,this.Rj=i,this.Fb()},t.prototype.Xj=function(t,e,i){this.mh=t,this.Nj=e,this.Sj=i,this.Fb()},t.prototype.Ra=function(){var t=window.devicePixelRatio?window.devicePixelRatio:1;this.Hj=this.Fj.width(),this.Ij=this.Fj.height(),this.Je.resize(this.Hj,this.Ij),this.Je.resolution=t,this.Xe.width=t*this.Hj,this.Xe.height=t*this.Ij,this.Fg=this.Ij/4;var e=minmax(1,this.Gj.nj.length,2*Math.floor(this.Hj/this.Fg)-5);if(this.Gj.mj!=e){for(var i=e;i<this.Gj.nj.length;i++)this.Gj.nj[i].dh();for(;this.Gj.mj<e;)this.Gj.Jf.addChild(this.Gj.nj[this.Gj.mj].Ff.Ef()),this.Gj.Jf.addChild(this.Gj.nj[this.Gj.mj].Hf.Ef()),this.Gj.mj+=1;for(;this.Gj.mj>e;)this.Gj.mj-=1,this.Gj.nj[this.Gj.mj].Hf.ah(),this.Gj.nj[this.Gj.mj].Ff.ah()}},t.prototype.Pa=function(){if(getApp().p.W){for(var t=Date.now(),e=t/200,i=Math.sin(e),o=this.Fg,n=1.5*this.Fg,r=this.Hj-.5*(this.Hj-.5*o*(this.Gj.mj-1)),s=.5*this.Ij,a=0,h=0,l=-1;l<this.Gj.mj;l++){var p=l,u=Math.cos(1*p/12*Math.PI-e)*(1-Math.pow(16,-1*p/12));if(l>=0){var c=r+-.5*o*p,f=s+.5*o*u,d=2*o,g=2*n,y=Math.atan2(h-u,p-a);0==l&&this.Gj.lj.eh(c,f,d,y),this.Gj.nj[l].eh(c,f,d,g,y);var w=this.Jj?this.Oj?.4+.2*i:.9+.1*i:this.Oj?.4:1;this.Gj.nj[l].Ff.hh(w),this.Gj.nj[l].Hf.hh(w)}a=p,h=u}for(var v=0;v<this.Gj.lj.sj.length;v++){var k=this.Kj?this.Pj?.4+.2*i:.9+.1*i:this.Pj?.4:1;this.Gj.lj.sj[v].hh(k)}for(var b=0;b<this.Gj.lj.tj.length;b++){var m=this.Lj?this.Qj?.4+.2*i:.9+.1*i:this.Qj?.4:1;this.Gj.lj.tj[b].hh(m)}for(var j=0;j<this.Gj.lj.uj.length;j++){var C=this.Mj?this.Rj?.4+.2*i:.9+.1*i:this.Rj?.4:1;this.Gj.lj.uj[j].hh(C)}for(var A=0;A<this.Gj.lj.vj.length;A++){var M=this.Nj?this.Sj?.4+.2*i:.9+.1*i:this.Sj?.4:1;this.Gj.lj.vj[A].hh(M)}this.Je.render(this.Gj.Jf)}},t}(),BaseViewController=function(){function t(t){this.rc=t}return t.Yj=$("#game-view"),t.Zj=$("#results-view"),t.$j=$("#main-menu-view"),t._j=$("#popup-view"),t.ak=$("#toaster-view"),t.bk=$("#loading-view"),t.ck=$("#stretch-box"),t.Wh=$("#background-canvas"),t.dk=$("#social-buttons"),t.ek=$("#markup-wrap"),t.prototype.a=function(){},t.prototype._h=function(){},t.prototype.ai=function(){},t.prototype.Xh=function(){},t.prototype.Ra=function(){},t.prototype.Pa=function(t,e){},t}(),GameViewController=function(){function t(t,e,i,o,n,r){var s='<div><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 456 456" xml:space="preserve"><rect x="0" y="0" width="456" height="456" fill="#F7941D"/><path d="M118.1 138.7c10.9 27 24.8 52.4 43 75.2 2.4 3 5.5 5.7 8.7 7.9 4.7 3.2 9.1 2.1 11-3.3 2-5.6 3.9-17 4-23 0.3-15.4 0-25.6-0.9-41 -0.5-9.9-4.1-18.6-18.6-21.2 -4.5-0.8-4.9-4.5-2-8.2 6-7.7 14.4-8.9 23.4-9.4 14.7-0.8 29.5-0.1 44.2 0 6 0.1 12 0.5 17.9 1.8 7.7 1.7 11.8 7.1 13.1 14.6 0.7 3.9 1 7.9 0.9 11.8 -0.4 16.9-1.2 33.7-1.4 50.6 -0.1 6.6 0.4 13.4 1.8 19.8 2 9 8.1 11.2 14.3 4.7 7.9-8.2 14.9-17.5 21.5-26.9 11.9-17.1 20.8-35.9 28.5-55.3 4-10 7-12.2 17.8-12.2 20.2 0 40.4-0.1 60.7 0 3.6 0 7.3 0.4 10.7 1.4 5.5 1.8 7.7 6.2 6.4 11.9 -3 13.3-10.2 24.6-17.9 35.5 -12.4 17.5-25.3 34.5-38 51.8 -1.6 2.2-3 4.5-4.4 6.9 -4.7 8.6-4.4 13.4 2.5 20.5 11 11.3 22.8 22 33.4 33.6 7.7 8.5 14.9 17.7 21 27.4 7.8 12.2 3 23.8-11.5 25.8 -9.1 1.3-53.6 0-55.9 0 -12-0.1-22.5-4.2-30.9-12.3 -9.4-9.1-17.9-19-27-28.4 -2.7-2.8-5.6-5.6-8.7-8 -7.4-5.6-14.6-4.4-18.1 4.3 -2.9 7.4-5.5 27-5.6 28.7 -0.6 8.7-6.2 14.3-16 14.8 -28.2 1.5-55.6-1.6-81.1-15.3 -21.6-11.6-38.9-27.9-53.8-47 -23.7-30.3-42.5-63.6-59.6-97.9 -0.9-1.8-18.2-38.7-18.7-40.4 -1.5-5.8-0.1-11.4 4.8-13.3 3.1-1.2 60.2 0 61.2 0C108 125.4 114.2 129.2 118.1 138.7z" fill="#FFF"/></svg><span>'+t+"</span></div>";return"undefined"!=typeof VK&&void 0!==VK.Share?VK.Share.button({noparse:!0,url:e,title:o,description:n,image:r},{type:"custom",text:s}):$(s)}function e(t,e,i,o,n,r){var s='<div><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 456 456" xml:space="preserve"><rect x="0" y="0" width="456" height="456" fill="#F7941D"/><path d="M242.7 456V279.7h-59.3v-71.9h59.3v-60.4c0-43.9 35.6-79.5 79.5-79.5h62v64.6h-44.4c-13.9 0-25.3 11.3-25.3 25.3v50h68.5l-9.5 71.9h-59.1V456z" fill="#fff"/></svg><span>'+t+"</span></div>",a=$(s);return a.click(function(){"undefined"!=typeof FB&&void 0!==FB.ui&&FB.ui({method:"feed",display:"popup",link:e,name:i,caption:o,description:n,picture:r},function(){})}),a}var i=$("#final-caption"),o=$("#final-continue"),n=$("#congrats-bg"),r=$("#unl6wj4czdl84o9b"),s=($("#congrats"),$("#final-share-vk")),a=$("#final-share-fb"),h=$("#final-message"),l=$("#final-score"),p=$("#final-place"),u=$("#final-board"),c=$("#game-canvas"),f=extend(BaseViewController,function(){BaseViewController.call(this,ViewControllerType.fk);var t=this,e=getApp(),n=c.get()[0];console.log("sSE="+env.gk),s.toggle(env.gk),a.toggle(env.gk),i.text(i18n("index.game.result.title")),o.text(i18n("index.game.result.continue")),o.click(function(){e.r.Cd(),e.f.Ma.c(),e.r.G(AudioManager.AudioState.F),e.s.I(e.s.F)}),$("html").keydown(function(e){32==e.keyCode&&(t.hk=!0)}).keyup(function(e){32==e.keyCode&&(t.hk=!1)}),n.addEventListener("touchmove",function(e){(e=e||window.event)&&(e=e.touches[0],void 0!==e.clientX?t.ik=Math.atan2(e.clientY-.5*n.offsetHeight,e.clientX-.5*n.offsetWidth):t.ik=Math.atan2(e.pageY-.5*n.offsetHeight,e.pageX-.5*n.offsetWidth))},!0),n.addEventListener("touchstart",function(e){(e=e||window.event)&&(t.hk=e.touches.length>=2),e.preventDefault()},!0),n.addEventListener("touchend",function(e){(e=e||window.event)&&(t.hk=e.touches.length>=2)},!0),n.addEventListener("mousemove",function(e){(e=e||window.event&&void 0!==e.clientX)&&(t.ik=Math.atan2(e.clientY-.5*n.offsetHeight,e.clientX-.5*n.offsetWidth))},!0),n.addEventListener("mousedown",function(e){t.hk=!0},!0),n.addEventListener("mouseup",function(e){t.hk=!1},!0),this.wb=new GameView(c),this.cb=d.J,this.ik=0,this.hk=!1});f.prototype.a=function(){},f.prototype._h=function(){this.cb==d.J?(BaseViewController.Yj.stop(),BaseViewController.Yj.fadeIn(500),BaseViewController.Zj.stop(),BaseViewController.Zj.fadeOut(1),BaseViewController.$j.stop(),BaseViewController.$j.fadeOut(50),BaseViewController._j.stop(),BaseViewController._j.fadeOut(50),BaseViewController.ak.stop(),BaseViewController.ak.fadeOut(50),BaseViewController.bk.stop(),BaseViewController.bk.fadeOut(50),BaseViewController.ck.stop(),BaseViewController.ck.fadeOut(1),BaseViewController.Wh.stop(),BaseViewController.Wh.fadeOut(50),BaseViewController.dk.stop(),BaseViewController.dk.fadeOut(50),BaseViewController.ek.stop(),BaseViewController.ek.fadeOut(50)):(BaseViewController.Yj.stop(),BaseViewController.Yj.fadeIn(500),BaseViewController.Zj.stop(),BaseViewController.Zj.fadeIn(500),BaseViewController.$j.stop(),BaseViewController.$j.fadeOut(50),BaseViewController._j.stop(),BaseViewController._j.fadeOut(50),BaseViewController.ak.stop(),BaseViewController.ak.fadeOut(50),BaseViewController.bk.stop(),BaseViewController.bk.fadeOut(50),BaseViewController.ck.stop(),BaseViewController.ck.fadeOut(1),BaseViewController.Wh.stop(),BaseViewController.Wh.fadeOut(50),BaseViewController.dk.stop(),BaseViewController.dk.fadeOut(50),BaseViewController.ek.stop(),BaseViewController.ek.fadeOut(50))},f.prototype.J=function(){return this.cb=d.J,this},f.prototype.Fa=function(){console.log("re");return n.hide(),setTimeout(function(){console.log("fi_bg"),n.fadeIn(500)},3e3),r.hide(),setTimeout(function(){console.log("fi_aw"),r.fadeIn(500)},500),this.cb=d.Fa,this},f.prototype.ai=function(){this.hk=!1,this.wb.Ra(),this.cb==d.Fa&&getApp().r.Gd()},f.prototype.Ra=function(){this.wb.Ra()},f.prototype.Pa=function(t,e){this.wb.Pa(t,e)},f.prototype.Da=function(i,o,n){var r=void 0,c=void 0,f=void 0;if(o>=1&&o<=10?(r=i18n("index.game.result.place.i"+o),c=i18n("index.game.result.placeInBoard"),f=i18n("index.game.social.shareResult.messGood").replace("{0}",n).replace("{1}",i).replace("{2}",r)):(r="",c=i18n("index.game.result.tryHit"),f=i18n("index.game.social.shareResult.messNorm").replace("{0}",n).replace("{1}",i)),h.html(i18n("index.game.result.your")),l.html(i),p.html(r),u.html(c),env.gk){var d=i18n("index.game.result.share");i18n("index.game.social.shareResult.caption");s.empty().append(t(d,"https://wormate.io","wormate.io",f,f,"https://wormate.io/images/og-share-img-new.jpg")),a.empty().append(e(d,"https://wormate.io","wormate.io",f,f,"https://wormate.io/images/og-share-img-new.jpg"))}},f.prototype.T=function(){return this.ik},f.prototype.U=function(){return this.hk};var d={J:0,Fa:1};return f}(),LoadingViewController=function(){var t=$("#loading-worm-a"),e=$("#loading-worm-b"),i=$("#loading-worm-c"),o=["100% 100%","100% 200%","200% 100%","200% 200%"],n=extend(BaseViewController,function(){BaseViewController.call(this,ViewControllerType.fk)});return n.prototype.a=function(){},n.prototype._h=function(){BaseViewController.Yj.stop(),BaseViewController.Yj.fadeOut(50),BaseViewController.Zj.stop(),BaseViewController.Zj.fadeOut(50),BaseViewController.$j.stop(),BaseViewController.$j.fadeOut(50),BaseViewController._j.stop(),BaseViewController._j.fadeOut(50),BaseViewController.ak.stop(),BaseViewController.ak.fadeOut(50),BaseViewController.bk.stop(),BaseViewController.bk.fadeIn(500),BaseViewController.ck.stop(),BaseViewController.ck.fadeIn(1),BaseViewController.Wh.stop(),BaseViewController.Wh.fadeIn(500),BaseViewController.dk.stop(),BaseViewController.dk.fadeOut(50),BaseViewController.ek.stop(),BaseViewController.ek.fadeOut(50)},n.prototype.ai=function(){this.jk()},n.prototype.jk=function(){t.css("background-position","100% 200%");for(var n=0;n<o.length;n++){var r=Math.floor(Math.random()*o.length),s=o[n];o[n]=o[r],o[r]=s}t.css("background-position",o[0]),e.css("background-position",o[1]),i.css("background-position",o[2])},n}(),MainMenuViewController=function(){var t=$("#mm-skin-canv"),e=$("#mm-skin-prev"),i=$("#mm-skin-next"),o=$("#mm-skin-over"),n=$("#mm-skin-over-button-list"),r=$("#mm-params-nickname"),s=$("#mm-params-game-mode"),a=$("#mm-action-buttons"),h=$("#mm-action-play"),l=$("#mm-action-guest"),p=$("#mm-action-login"),u=$("#mm-player-info"),c=$("#mm-store"),f=$("#mm-leaders"),d=$("#mm-settings"),g=$("#mm-coins-box"),y=$("#mm-player-avatar"),w=$("#mm-player-username"),v=$("#mm-coins-val"),k=$("#mm-player-exp-bar"),b=$("#mm-player-exp-val"),m=$("#mm-player-level"),j=extend(BaseViewController,function(){BaseViewController.call(this,ViewControllerType.$h);var o=getApp();this.kk=new WormView(t),s.click(function(){o.r.Cd()}),t.click(function(){o.u.P()&&(o.r.Cd(),o.s.I(o.s.Rh))}),e.click(function(){o.r.Cd(),o.t.sh()}),i.click(function(){o.r.Cd(),o.t.rh()}),r.keypress(function(t){13==t.keyCode&&o.na()}),h.click(function(){o.r.Cd(),o.na()}),l.click(function(){o.r.Cd(),o.na()}),p.click(function(){o.r.Cd(),o.s.I(o.s.Qh)}),d.click(function(){o.r.Cd(),o.s.I(o.s.xa)}),u.click(function(){o.u.P()&&(o.r.Cd(),o.s.I(o.s.Ph))}),f.click(function(){o.u.P()&&(o.r.Cd(),o.s.I(o.s.Oh))}),c.click(function(){o.u.P()&&(o.r.Cd(),o.s.I(o.s.Sh))}),g.click(function(){o.u.P()&&(o.r.Cd(),o.s.I(o.s.Nh))}),this.lk(),this.mk();var n=getCookie(Cookies.va);"ARENA"!=n&&"TEAM2"!=n&&(n="ARENA"),s.val(n),console.log("Load GM: "+n)});return j.prototype.a=function(){var t=getApp(),e=this;t.u.V(function(){t.s.F.nk()}),t.u.Gi(function(){t.u.P()?(t.t.th(t.u.ti(),PropertyType.ia),t.t.th(t.u.vi(),PropertyType.ja),t.t.th(t.u.wi(),PropertyType.ka),t.t.th(t.u.xi(),PropertyType.la),t.t.th(t.u.yi(),PropertyType.ma)):(t.t.th(t.Ga(),PropertyType.ia),t.t.th(0,PropertyType.ja),t.t.th(0,PropertyType.ka),t.t.th(0,PropertyType.la),t.t.th(0,PropertyType.ma))}),t.u.Gi(function(){h.toggle(t.u.P()),p.toggle(!t.u.P()),l.toggle(!t.u.P()),f.toggle(t.u.P()),c.toggle(t.u.P()),g.toggle(t.u.P()),t.u.P()?(o.hide(),w.html(t.u.mi()),y.attr("src",t.u.ni()),v.html(t.u.pi()),k.width(100*t.u.ri()/t.u.si()+"%"),b.html(t.u.ri()+" / "+t.u.si()),m.html(t.u.qi()),r.val(t.u.ga())):(o.toggle(env.gk&&!t.Ha()),w.html(w.data("guest")),y.attr("src",GUEST_AVATAR_URL),v.html("10"),k.width("0"),b.html(""),m.html(1),r.val(getCookie(Cookies.Aa)))}),t.t.oh(function(){e.kk.Tj(t.t.ha(PropertyType.ia),!1,!1),e.kk.Uj(t.t.ha(PropertyType.ja),!1,!1),e.kk.Vj(t.t.ha(PropertyType.ka),!1,!1),e.kk.Wj(t.t.ha(PropertyType.la),!1,!1),e.kk.Xj(t.t.ha(PropertyType.ma),!1,!1)})},j.prototype._h=function(){BaseViewController.Yj.stop(),BaseViewController.Yj.fadeOut(50),BaseViewController.Zj.stop(),BaseViewController.Zj.fadeOut(50),BaseViewController.$j.stop(),BaseViewController.$j.fadeIn(500),BaseViewController._j.stop(),BaseViewController._j.fadeOut(50),BaseViewController.ak.stop(),BaseViewController.ak.fadeOut(50),BaseViewController.bk.stop(),BaseViewController.bk.fadeOut(50),BaseViewController.ck.stop(),BaseViewController.ck.fadeIn(1),BaseViewController.Wh.stop(),BaseViewController.Wh.fadeIn(500),BaseViewController.dk.stop(),BaseViewController.dk.fadeIn(500),BaseViewController.ek.stop(),BaseViewController.ek.fadeIn(500)},j.prototype.ai=function(){getApp().r.Dd()},j.prototype.Ra=function(){this.kk.Ra()},j.prototype.Pa=function(t,e){this.kk.Pa()},j.prototype.ga=function(){return r.val()},j.prototype.D=function(){return s.val()},j.prototype.nk=function(){a.show()},j.prototype.lk=function(){var t=$("#mm-advice-cont").children(),e=0;setInterval(function(){t.eq(e).fadeOut(500,function(){++e>=t.length&&(e=0),t.eq(e).fadeIn(500).css("display","inline-block")})},3e3)},j.prototype.mk=function(){function t(){e.Ka(!0),setTimeout(function(){o.hide()},3e3)}var e=getApp();if(env.gk&&!e.Ha()){o.show();var i=i18n("index.game.main.menu.unlockSkins.share"),r=encodeURIComponent(i18n("index.game.main.menu.unlockSkins.comeAndPlay")+" https://wormate.io/ #wormate #wormateio"),s=encodeURIComponent(i18n("index.game.main.menu.unlockSkins.comeAndPlay"));n.append($('<a class="mm-skin-over-button" id="mm-skin-over-tw" target="_blank" href="http://twitter.com/intent/tweet?status='+r+'"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjQ1NiIgaGVpZ2h0PSI0NTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik02MCAzMzhjMzAgMTkgNjYgMzAgMTA1IDMwIDEwOCAwIDE5Ni04OCAxOTYtMTk2IDAtMyAwLTUgMC04IDQtMyAyOC0yMyAzNC0zNSAwIDAtMjAgOC0zOSAxMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAyLTEgMjctMTggMzAtMzggMCAwLTE0IDctMzMgMTQgLTMgMS03IDItMTAgMyAtMTMtMTMtMzAtMjItNTAtMjIgLTM4IDAtNjkgMzEtNjkgNjkgMCA1IDEgMTEgMiAxNiAtNSAwLTg2LTUtMTQxLTcxIDAgMC0zMyA0NSAyMCA5MSAwIDAtMTYtMS0zMC05IDAgMC01IDU0IDU0IDY4IDAgMC0xMiA0LTMwIDEgMCAwIDEwIDQ0IDYzIDQ4IDAgMC00MiAzOC0xMDEgMjlMNjAgMzM4eiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg=="><span>'+i+"</span></a>").click(t)),n.append($('<a class="mm-skin-over-button" id="mm-skin-over-vk" target="_blank" href="http://vk.com/share.php?url=https%3A%2F%2Fwormate.io"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ1NiA0NTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0xMTguMSAxMjVjMTAuOSAyNyAyNC44IDUyLjQgNDMgNzUuMiAyLjQgMyA1LjUgNS43IDguNyA3LjkgNC43IDMuMiA5LjEgMi4xIDExLTMuMyAyLTUuNiAzLjktMTcgNC0yMyAwLjMtMTUuNCAwLTI1LjYtMC45LTQxIC0wLjUtOS45LTQuMS0xOC42LTE4LjYtMjEuMiAtNC41LTAuOC00LjktNC41LTItOC4yIDYtNy43IDE0LjQtOC45IDIzLjQtOS40IDE0LjctMC44IDI5LjUtMC4xIDQ0LjIgMCA2IDAuMSAxMiAwLjUgMTcuOSAxLjggNy43IDEuNyAxMS44IDcuMSAxMy4xIDE0LjYgMC43IDMuOSAxIDcuOSAwLjkgMTEuOCAtMC40IDE2LjktMS4yIDMzLjctMS40IDUwLjYgLTAuMSA2LjYgMC40IDEzLjQgMS44IDE5LjggMiA5IDguMSAxMS4yIDE0LjMgNC43IDcuOS04LjIgMTQuOS0xNy41IDIxLjUtMjYuOSAxMS45LTE3LjEgMjAuOC0zNS45IDI4LjUtNTUuMyA0LTEwIDctMTIuMiAxNy44LTEyLjIgMjAuMiAwIDQwLjQtMC4xIDYwLjcgMCAzLjYgMCA3LjMgMC40IDEwLjcgMS40IDUuNSAxLjggNy43IDYuMiA2LjQgMTEuOSAtMyAxMy4zLTEwLjIgMjQuNi0xNy45IDM1LjUgLTEyLjQgMTcuNS0yNS4zIDM0LjUtMzggNTEuOCAtMS42IDIuMi0zIDQuNS00LjQgNi45IC00LjcgOC42LTQuNCAxMy40IDIuNSAyMC41IDExIDExLjMgMjIuOCAyMiAzMy40IDMzLjYgNy43IDguNSAxNC45IDE3LjcgMjEgMjcuNCA3LjggMTIuMiAzIDIzLjgtMTEuNSAyNS44IC05LjEgMS4zLTUzLjYgMC01NS45IDAgLTEyLTAuMS0yMi41LTQuMi0zMC45LTEyLjMgLTkuNC05LjEtMTcuOS0xOS0yNy0yOC40IC0yLjctMi44LTUuNi01LjYtOC43LTggLTcuNC01LjYtMTQuNi00LjQtMTguMSA0LjMgLTIuOSA3LjQtNS41IDI3LTUuNiAyOC43IC0wLjYgOC43LTYuMiAxNC4zLTE2IDE0LjggLTI4LjIgMS41LTU1LjYtMS42LTgxLjEtMTUuMyAtMjEuNi0xMS42LTM4LjktMjcuOS01My44LTQ3IC0yMy43LTMwLjMtNDIuNS02My42LTU5LjYtOTcuOSAtMC45LTEuOC0xOC4yLTM4LjctMTguNy00MC40IC0xLjUtNS44LTAuMS0xMS40IDQuOC0xMy4zIDMuMS0xLjIgNjAuMiAwIDYxLjIgMEMxMDggMTI1LjQgMTE0LjIgMTI5LjIgMTE4LjEgMTM4Ljd6IiBmaWxsPSIjRkZGIi8+PC9zdmc+"><span>'+i+"</span></a>").click(t)),n.append($('<a class="mm-skin-over-button" id="mm-skin-over-fb" target="_blank" href="https://www.facebook.com/dialog/share?app_id=861926850619051&display=popup&href=https%3A%2F%2Fwormate.io&redirect_uri=https%3A%2F%2Fwormate.io&hashtag=%23wormateio&quote='+s+'"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ1NiA0NTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0yNDQuMyA0NTZWMjc5LjdoLTU5LjN2LTcxLjloNTkuM3YtNjAuNGMwLTQzLjkgMzUuNi03OS41IDc5LjUtNzkuNWg2MnY2NC42aC00NC40Yy0xMy45IDAtMjUuMyAxMS4zLTI1LjMgMjUuM3Y1MGg2OC41bC05LjUgNzEuOWgtNTkuMVY0NTZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+"><span>'+i+"</span></a>").click(t))}},j}(),PrerollViewController=function(){var t=extend(BaseViewController,function(){BaseViewController.call(this,ViewControllerType.fk)});return t.prototype.a=function(){},t.prototype._h=function(){BaseViewController.Yj.stop(),BaseViewController.Yj.fadeOut(50),BaseViewController.Zj.stop(),BaseViewController.Zj.fadeOut(50),BaseViewController.$j.stop(),BaseViewController.$j.fadeOut(50),BaseViewController._j.stop(),BaseViewController._j.fadeOut(50),BaseViewController.ak.stop(),BaseViewController.ak.fadeOut(50),BaseViewController.bk.stop(),BaseViewController.bk.fadeOut(50),BaseViewController.ck.stop(),BaseViewController.ck.fadeOut(1),BaseViewController.Wh.stop(),BaseViewController.Wh.fadeOut(50),BaseViewController.dk.stop(),BaseViewController.dk.fadeOut(50),BaseViewController.ek.stop(),BaseViewController.ek.fadeOut(50)},t}(),ToasterContainerViewController=function(){var t=$("#toaster-stack"),e=extend(BaseViewController,function(){BaseViewController.call(this,ViewControllerType.fk),this.ok=[],this.pk=null});return e.prototype.a=function(){},e.prototype._h=function(){BaseViewController.Yj.stop(),BaseViewController.Yj.fadeOut(50),BaseViewController.Zj.stop(),BaseViewController.Zj.fadeOut(50),BaseViewController.$j.stop(),BaseViewController.$j.fadeOut(50),BaseViewController._j.stop(),BaseViewController._j.fadeOut(50),BaseViewController.ak.stop(),BaseViewController.ak.fadeIn(500),BaseViewController.bk.stop(),BaseViewController.bk.fadeOut(50),BaseViewController.ck.stop(),BaseViewController.ck.fadeIn(1),BaseViewController.Wh.stop(),BaseViewController.Wh.fadeIn(500),BaseViewController.dk.stop(),BaseViewController.dk.fadeOut(50),BaseViewController.ek.stop(),BaseViewController.ek.fadeIn(500)},e.prototype.ai=function(){this.qk()},e.prototype.di=function(){return null!=this.pk||this.ok.length>0},e.prototype._=function(t){this.ok.unshift(t),setTimeout(function(){getApp().s.bi()},0)},e.prototype.Ki=function(t){this.ok.push(t),setTimeout(function(){getApp().s.bi()},0)},e.prototype.qk=function(){var e=this;if(null==this.pk){if(0==this.ok.length)return void getApp().s.Zh();var i=this.ok.shift();this.pk=i;var o=i.rk();o.hide(),o.fadeIn(300),t.append(o),i.sk=function(){o.fadeOut(300),setTimeout(function(){o.remove()},300),e.pk==i&&(e.pk=null),e.qk()},i.ai()}},e}(),ViewControllerType={fk:0,$h:1},BasePopupViewController=function(){var t=$("#popup-menu-label"),e=$("#popup-menu-coins-box"),i=$("#popup-menu-coins-val");$("#popup-menu-back").click(function(){var t=getApp();t.r.Cd(),t.s.Zh()}),e.click(function(){var t=getApp();t.u.P()&&(t.r.Cd(),t.s.I(t.s.Nh))});var o=extend(BaseViewController,function(t,e){BaseViewController.call(this,ViewControllerType.$h),this.ad=t,this.tk=e});return o.prototype.a=function(){if(o.parent.prototype.a.call(this),!o.uk){o.uk=!0;var t=getApp();t.u.Gi(function(){t.u.P()?i.html(t.u.pi()):i.html("0")})}},o.vk=$("#coins-view"),o.wk=$("#leaders-view"),o.xk=$("#profile-view"),o.yk=$("#settings-view"),o.zk=$("#login-view"),o.Ak=$("#skins-view"),o.Bk=$("#store-view"),o.Ck=$("#wear-view"),o.Dk=$("#withdraw-consent-view"),o.Ek=$("#please-wait-view"),o.prototype._h=function(){BaseViewController.Yj.stop(),BaseViewController.Yj.fadeOut(200),BaseViewController.Zj.stop(),BaseViewController.Zj.fadeOut(200),BaseViewController.$j.stop(),BaseViewController.$j.fadeOut(200),BaseViewController._j.stop(),BaseViewController._j.fadeIn(200),BaseViewController.ak.stop(),BaseViewController.ak.fadeOut(200),BaseViewController.bk.stop(),BaseViewController.bk.fadeOut(200),BaseViewController.dk.stop(),BaseViewController.dk.fadeIn(200),BaseViewController.ek.stop(),BaseViewController.ek.fadeIn(200),t.html(this.ad),e.toggle(this.tk),this.Fk(),this.Gk()},o.prototype.Gk=function(){},o.prototype.Hk=function(){BasePopupViewController.Ek.stop(),BasePopupViewController.Ek.fadeIn(300)},o.prototype.Fk=function(){BasePopupViewController.Ek.stop(),BasePopupViewController.Ek.fadeOut(300)},o}(),CoinsViewController=function(){var t=$("#store-buy-coins_125000"),e=$("#store-buy-coins_50000"),i=$("#store-buy-coins_16000"),o=$("#store-buy-coins_7000"),n=$("#store-buy-coins_3250"),r=$("#store-buy-coins_1250"),s=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.coins.tab"),!1);var s=getApp(),a=this;t.click(function(){s.r.Cd(),a.Ik("coins_125000")}),e.click(function(){s.r.Cd(),a.Ik("coins_50000")}),i.click(function(){s.r.Cd(),a.Ik("coins_16000")}),o.click(function(){s.r.Cd(),a.Ik("coins_7000")}),n.click(function(){s.r.Cd(),a.Ik("coins_3250")}),r.click(function(){s.r.Cd(),a.Ik("coins_1250")})});return s.prototype.a=function(){s.parent.prototype.a.call(this)},s.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeIn(200),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},s.prototype.ai=function(){getApp().r.Dd()},s.prototype.Ik=function(t){},s}(),LeadersViewController=function(){var t=$("#highscore-table"),e=$("#leaders-button-level"),i=$("#leaders-button-highscore"),o=$("#leaders-button-kills"),n=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.leaders.tab"),!0);var t=getApp(),n=this;this.Jk={},this.Kk={Lk:{Mk:e,Nk:"byLevel"},Ok:{Mk:i,Nk:"byHighScore"},Pk:{Mk:o,Nk:"byKillsAndHeadShots"}},e.click(function(){t.r.Cd(),n.Qk(n.Kk.Lk)}),i.click(function(){t.r.Cd(),n.Qk(n.Kk.Ok)}),o.click(function(){t.r.Cd(),n.Qk(n.Kk.Pk)})});return n.prototype.a=function(){n.parent.prototype.a.call(this)},n.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeIn(200),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},n.prototype.ai=function(){getApp().r.Dd();var t=this;this.Hk(),$.get(GATEWAY_HOST+"/pub/leaders",function(e){t.Jk=e,t.Qk(null!=t.Rk?t.Rk:t.Kk.Lk),t.Fk()}).done(function(){t.Fk()})},n.prototype.Qk=function(e){this.Rk=e;for(var i in this.Kk)if(this.Kk.hasOwnProperty(i)){var o=this.Kk[i];o.Mk.removeClass("pressed")}this.Rk.Mk.addClass("pressed");for(var n=this.Jk[this.Rk.Nk],r="",s=0;s<n.length;s++){var a=n[s];r+='<div class="table-row"><span>'+(s+1)+'</span><span><img src="'+a.avatarUrl+'"/></span><span>'+a.username+"</span><span>"+a.level+"</span><span>"+a.highScore+"</span><span>"+a.headShots+" / "+a.kills+"</span></div>"}t.empty(),t.append(r)},n}(),LoginViewController=function(){var t=$("#popup-login-gg"),e=$("#popup-login-fb"),i=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.login.tab"),!1);var i=getApp(),o=this;t.click(function(){i.r.Cd(),o.Hk(),i.u.Hi(function(){o.Fk()}),setTimeout(function(){o.Fk()},1e4),i.u.Qi()}),e.click(function(){i.r.Cd(),o.Hk(),i.u.Hi(function(){o.Fk()}),setTimeout(function(){o.Fk()},1e4),i.u.Mi()})});return i.prototype.a=function(){i.parent.prototype.a.call(this)},i.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeIn(200),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},i.prototype.ai=function(){getApp().r.Dd()},i}(),ProfileViewController=function(){
var t=$("#profile-avatar"),e=$("#profile-username"),i=$("#profile-experience-bar"),o=$("#profile-experience-val"),n=$("#profile-level"),r=$("#profile-stat-highScore"),s=$("#profile-stat-bestSurvivalTime"),a=$("#profile-stat-kills"),h=$("#profile-stat-headshots"),l=$("#profile-stat-gamesPlayed"),p=$("#profile-stat-totalTimeSpent"),u=$("#profile-stat-registrationDate"),c=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.profile.tab"),!0)});return c.prototype.a=function(){c.parent.prototype.a.call(this)},c.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeIn(200),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},c.prototype.ai=function(){var c=getApp();c.r.Dd();var f=c.u.Fi(),d=moment([f.year,f.month-1,f.day]).format("LL");e.html(c.u.mi()),t.attr("src",c.u.ni()),i.width(100*c.u.ri()/c.u.si()+"%"),o.html(c.u.ri()+" / "+c.u.si()),n.html(c.u.qi()),r.html(c.u.zi()),s.html(timeSecsToIntervalText(c.u.Ai())),a.html(c.u.Bi()),h.html(c.u.Ci()),l.html(c.u.Di()),p.html(timeSecsToIntervalText(c.u.Ei())),u.html(d)},c}(),SettingsViewController=function(){var t=$("#settings-music-enabled-switch"),e=$("#settings-sfx-enabled-switch"),i=$("#settings-show-names-switch"),o=$("#popup-logout"),n=$("#popup-logout-container"),r=$("#popup-withdraw-consent"),s=$("#popup-give-consent"),a=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.settings.tab"),!1);var n=this,s=getApp();t.click(function(){var e=!!t.prop("checked");setCookie(Cookies.Be,e,30),s.r.td(e),s.r.Cd()}),e.click(function(){var t=!!e.prop("checked");setCookie(Cookies.Ce,t,30),s.r.rd(t),s.r.Cd()}),i.click(function(){s.r.Cd()}),o.click(function(){s.r.Cd(),n.Hk(),setTimeout(function(){n.Fk()},2e3),s.u.Ni()}),r.click(function(){s.Y()?(s.r.Cd(),s.s.I(s.s.Mh)):s.r.Hd()})});return a.prototype.a=function(){a.parent.prototype.a.call(this);var o=getApp(),r=void 0;switch(getCookie(Cookies.Be)){case"false":r=!1;break;default:r=!0}t.prop("checked",r),o.r.td(r);var h=void 0;switch(getCookie(Cookies.Ce)){case"false":h=!1;break;default:h=!0}e.prop("checked",h),o.r.rd(h);var l=void 0;switch(getCookie(Cookies.ya)){case"false":l=!1;break;default:l=!0}console.log("Load sPN: "+l),i.prop("checked",l),s.hide(),o.u.V(function(){n.toggle(o.u.P())})},a.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeIn(200),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},a.prototype.ai=function(){var t=getApp();t.r.Dd(),t.Y()?r.show():r.hide()},a.prototype.wa=function(){return i.prop("checked")},a}(),SkinsViewController=function(){var t=$("#store-view-canv"),e=$("#store-locked-bar"),i=$("#store-buy-button"),o=$("#store-item-price"),n=$("#store-groups"),r=$("#store-view-prev"),s=$("#store-view-next"),a=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.skins.tab"),!0);var e=this,o=getApp();this.Sk=null,this.Tk=[],this.Uk={},this.Vk=new WormView(t),i.click(function(){o.r.Cd(),e.Wk()}),r.click(function(){o.r.Cd(),e.Sk.Xk()}),s.click(function(){o.r.Cd(),e.Sk.Yk()})});a.prototype.a=function(){a.parent.prototype.a.call(this);var t=this,e=getApp();e.p.ca(function(){var i=e.p.Ac();if(null!=i){t.Tk=[];for(var o=0;o<i.skinGroupArrayDict.length;o++)t.Tk.push(new h(t,i.skinGroupArrayDict[o]));t.Uk={};for(var n=0;n<i.skinArrayDict.length;n++){var r=i.skinArrayDict[n];t.Uk[r.id]=r}}}),this.Zk(!1),e.t.oh(function(){t.Zk(!1)})},a.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeIn(200),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},a.prototype.ai=function(){getApp().r.Dd(),this.$k()},a.prototype.Ra=function(){this.Vk.Ra()},a.prototype.Pa=function(t,e){this.Vk.Pa()},a.prototype.$k=function(){var t=this,e=this,i=getApp();n.empty();for(var o=0;o<this.Tk.length;o++)!function(o){var r=t.Tk[o],s=document.createElement("li");n.append(s);var a=$(s);a.html(r._k()),a.click(function(){i.r.Cd(),e.al(r)}),r.bl=a}(o);if(this.Tk.length>0){for(var r=i.t.ha(PropertyType.ia),o=0;o<this.Tk.length;o++)for(var s=this.Tk[o],a=s.cl.list,h=0;h<a.length;h++)if(a[h]==r)return s.dl=h,void this.al(s);this.al(this.Tk[0])}},a.prototype.al=function(t){this.Sk!=t&&(this.Sk=t,n.children().removeClass("pressed"),this.Sk.bl&&this.Sk.bl.addClass("pressed"),this.Zk(!0))},a.prototype.el=function(){return null==this.Sk?Optional.Qg():this.Sk.fl()},a.prototype.Wk=function(){var t=this;this.el().Ug(function(e){t.gl(e)})},a.prototype.gl=function(t){var e=this,i=getApp(),o=this.Uk[t].price;if(!(i.u.pi()<o)){this.Hk();var n=i.t.ha(PropertyType.ia),r=i.t.ha(PropertyType.ja),s=i.t.ha(PropertyType.ka),a=i.t.ha(PropertyType.la),h=i.t.ha(PropertyType.ma);i.u.Li(t,PropertyType.ia,function(){i.t.th(n,PropertyType.ia),i.t.th(r,PropertyType.ja),i.t.th(s,PropertyType.ka),i.t.th(a,PropertyType.la),i.t.th(h,PropertyType.ma),i.u.uh(t,PropertyType.ia)&&i.t.th(t,PropertyType.ia),e.Fk()})}},a.prototype.Zk=function(t){var n=getApp();this.Vk.Uj(n.t.ha(PropertyType.ja),!1,!1),this.Vk.Vj(n.t.ha(PropertyType.ka),!1,!1),this.Vk.Wj(n.t.ha(PropertyType.la),!1,!1),this.Vk.Xj(n.t.ha(PropertyType.ma),!1,!1);var r=this.el();if(r.Tg()){var s=r.Sg(),a=this.Uk[s],h=!1;n.t.Ja(s,PropertyType.ia)?(e.hide(),i.hide()):null==a||1==a.nonbuyable?(h=!0,e.show(),i.hide(),null!=a&&a.nonbuyable&&null!=a.nonbuyableReason?e.html(i18nCustomBundle(a.nonbuyableReason)):e.html(i18n("index.game.popup.menu.store.locked"))):(e.hide(),i.show(),o.html(null!=a?a.price:0)),this.Vk.Tj(s,!0,h),t&&n.t.th(s,PropertyType.ia)}};var h=function(){function t(t,e){this.hl=t,this.dl=0,this.cl=e}return t.prototype.Xk=function(){--this.dl<0&&(this.dl=this.cl.list.length-1),this.hl.Zk(!0)},t.prototype.Yk=function(){++this.dl>=this.cl.list.length&&(this.dl=0),this.hl.Zk(!0)},t.prototype._k=function(){return i18nCustomBundle(this.cl.name)},t.prototype.fl=function(){return this.dl>=this.cl.list.length?Optional.Qg():Optional.Rg(this.cl.list[this.dl])},t}();return a}(),StoreViewController=function(){var t=$("#store-go-coins-button"),e=$("#store-go-skins-button"),i=$("#store-go-wear-button"),o=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.store.tab"),!0);var o=getApp();t.click(function(){o.r.Cd(),o.s.I(o.s.Nh)}),e.click(function(){o.r.Cd(),o.s.I(o.s.Rh)}),i.click(function(){o.r.Cd(),o.s.I(o.s.Th)})});return o.prototype.a=function(){o.parent.prototype.a.call(this)},o.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeIn(200),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},o.prototype.ai=function(){getApp().r.Dd()},o}(),WearViewController=function(){var t=$("#wear-view-canv"),e=$("#wear-locked-bar"),i=$("#wear-buy-button"),o=$("#wear-item-price"),n=$("#wear-eyes-button"),r=$("#wear-mouths-button"),s=$("#wear-glasses-button"),a=$("#wear-hats-button"),h=$("#wear-tint-chooser"),l=$("#wear-view-prev"),p=$("#wear-view-next"),u=extend(BasePopupViewController,function(){var e=this;BasePopupViewController.call(this,i18n("index.game.popup.menu.wear.tab"),!0);var o=getApp(),h=this;this.il=[],this.ja=new c(this,PropertyType.ja,n),this.ka=new c(this,PropertyType.ka,r),this.la=new c(this,PropertyType.la,s),this.ma=new c(this,PropertyType.ma,a),this.jl=null,this.kl=null,this.ll=null,this.ml=null,this.nl=null,this.ol=null,this.pl=new WormView(t),i.click(function(){o.r.Cd(),h.ql()}),l.click(function(){o.r.Cd(),h.jl.rl()}),p.click(function(){o.r.Cd(),h.jl.sl()}),n.click(function(){o.r.Cd(),h.tl(e.ja)}),r.click(function(){o.r.Cd(),h.tl(e.ka)}),s.click(function(){o.r.Cd(),h.tl(e.la)}),a.click(function(){o.r.Cd(),h.tl(e.ma)}),this.il.push(this.ja),this.il.push(this.ka),this.il.push(this.la),this.il.push(this.ma)});u.prototype.a=function(){u.parent.prototype.a.call(this);var t=getApp(),e=this;t.p.ca(function(){var i=t.p.Ac();null!=i&&(e.kl=i.eyesDict,e.ll=i.mouthDict,e.ml=i.glassesDict,e.nl=i.hatDict,e.ol=i.colorDict,e.ja.ul(i.eyesVariantArray),e.ja.vl(e.kl),e.ka.ul(i.mouthVariantArray),e.ka.vl(e.ll),e.la.ul(i.glassesVariantArray),e.la.vl(e.ml),e.ma.ul(i.hatVariantArray),e.ma.vl(e.nl))}),this.Zk(!1),t.t.oh(function(){e.Zk(!1)})},u.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeIn(200),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeOut(50)},u.prototype.ai=function(){getApp().r.Dd(),this.tl(null!=this.jl?this.jl:this.ja)},u.prototype.Ra=function(){this.pl.Ra()},u.prototype.Pa=function(t,e){this.pl.Pa()},u.prototype.tl=function(t){this.jl=t;for(var e=0;e<this.il.length;e++)this.il[e].Mk.removeClass("pressed");this.jl.Mk.addClass("pressed"),this.jl._h()},u.prototype.wl=function(){return null==this.jl?Optional.Qg():Optional.Rg({Lb:this.jl.fl(),rc:this.jl.rc})},u.prototype.ql=function(){var t=this;this.wl().Ug(function(e){t.Li(e.Lb,e.rc)})},u.prototype.Li=function(t,e){var i=this,o=getApp(),n=void 0;switch(e){case PropertyType.ja:n=this.kl[t].price;break;case PropertyType.ka:n=this.ll[t].price;break;case PropertyType.la:n=this.ml[t].price;break;case PropertyType.ma:n=this.nl[t].price;break;default:return}if(!(o.u.pi()<n)){this.Hk();var r=o.t.ha(PropertyType.ia),s=o.t.ha(PropertyType.ja),a=o.t.ha(PropertyType.ka),h=o.t.ha(PropertyType.la),l=o.t.ha(PropertyType.ma);o.u.Li(t,e,function(){o.t.th(r,PropertyType.ia),o.t.th(s,PropertyType.ja),o.t.th(a,PropertyType.ka),o.t.th(h,PropertyType.la),o.t.th(l,PropertyType.ma),o.u.uh(t,e)&&o.t.th(t,e),i.Fk()})}},u.prototype.xl=function(t,e){switch(e){case PropertyType.ja:return this.kl[t];case PropertyType.ka:return this.ll[t];case PropertyType.la:return this.ml[t];case PropertyType.ma:return this.nl[t]}return null},u.prototype.Zk=function(t){var n=getApp();this.pl.Tj(n.t.ha(PropertyType.ia),!1,!1),this.pl.Uj(n.t.ha(PropertyType.ja),!1,!1),this.pl.Vj(n.t.ha(PropertyType.ka),!1,!1),this.pl.Wj(n.t.ha(PropertyType.la),!1,!1),this.pl.Xj(n.t.ha(PropertyType.ma),!1,!1);var r=this.wl();if(r.Tg()){var s=r.Sg(),a=this.xl(s.Lb,s.rc),h=!1;switch(n.t.Ja(s.Lb,s.rc)?(e.hide(),i.hide()):null==a||1==a.nonbuyable?(h=!0,e.show(),i.hide(),null!=a&&a.nonbuyable&&null!=a.nonbuyableReason?e.html(i18nCustomBundle(a.nonbuyableReason)):e.html(i18n("index.game.popup.menu.store.locked"))):(e.hide(),i.show(),o.html(null!=a?a.price:0)),s.rc){case PropertyType.ja:this.pl.Uj(s.Lb,!0,h);break;case PropertyType.ka:this.pl.Vj(s.Lb,!0,h);break;case PropertyType.la:this.pl.Wj(s.Lb,!0,h);break;case PropertyType.ma:this.pl.Xj(s.Lb,!0,h)}t&&n.t.th(s.Lb,s.rc)}};var c=function(){function t(t,e,i){this.hl=t,this.rc=e,this.Mk=i,this.yl={},this.zl=[[]],this.Al=-10,this.Bl=-10}return t.prototype.ul=function(t){this.zl=t},t.prototype.vl=function(t){this.yl=t},t.prototype._h=function(){for(var t=getApp(),e=t.t.ha(this.rc),i=0;i<this.zl.length;i++)for(var o=0;o<this.zl[i].length;o++)if(this.zl[i][o]==e)return this.Cl(i),void this.Dl(o);this.Cl(0),this.Dl(0)},t.prototype.rl=function(){var t=this.Al-1;t<0&&(t=this.zl.length-1),this.Cl(t),this.Dl(this.Bl%this.zl[t].length)},t.prototype.sl=function(){var t=this.Al+1;t>=this.zl.length&&(t=0),this.Cl(t),this.Dl(this.Bl%this.zl[t].length)},t.prototype.Cl=function(t){var e=this;if(!(t<0||t>=this.zl.length)){this.Al=t,h.empty();var i=this.zl[this.Al];if(i.length>1)for(var o=0;o<i.length;o++)!function(t){var o=i[t],n=e.yl[o],r="#"+e.hl.ol[n.prime],s=$('<div style="border-color:'+r+'"></div>');s.click(function(){getApp().r.Cd(),e.Dl(t)}),h.append(s)}(o)}},t.prototype.Dl=function(t){if(!(t<0||t>=this.zl[this.Al].length)){this.Bl=t,h.children().css("background-color","transparent");var e=h.children(":nth-child("+(1+t)+")");e.css("background-color",e.css("border-color")),this.hl.Zk(!0)}},t.prototype.fl=function(){return this.zl[this.Al][this.Bl]},t}();return u}(),WithdrawConsentViewController=function(){var t=$("#withdraw-consent-yes"),e=$("#withdraw-consent-no"),i=extend(BasePopupViewController,function(){BasePopupViewController.call(this,i18n("index.game.popup.menu.consent.tab"),!1);var i=getApp();t.click(function(){i.r.Cd(),i.Y()?(i.s.I(i.s.F),i.$(!1,!0),i.s.aa._(new ConsentAcceptanceToasterViewController)):i.s.Zh()}),e.click(function(){i.r.Cd(),i.s.Zh()})});return i.prototype.a=function(){i.parent.prototype.a.call(this)},i.prototype.Gk=function(){BasePopupViewController.vk.stop(),BasePopupViewController.vk.fadeOut(50),BasePopupViewController.wk.stop(),BasePopupViewController.wk.fadeOut(50),BasePopupViewController.xk.stop(),BasePopupViewController.xk.fadeOut(50),BasePopupViewController.zk.stop(),BasePopupViewController.zk.fadeOut(50),BasePopupViewController.yk.stop(),BasePopupViewController.yk.fadeOut(50),BasePopupViewController.Ak.stop(),BasePopupViewController.Ak.fadeOut(50),BasePopupViewController.Bk.stop(),BasePopupViewController.Bk.fadeOut(50),BasePopupViewController.Ck.stop(),BasePopupViewController.Ck.fadeOut(50),BasePopupViewController.Dk.stop(),BasePopupViewController.Dk.fadeIn(200)},i.prototype.ai=function(){getApp().r.Dd()},i}(),BaseToasterViewController=function(){function t(){this.sk=function(){}}return t.prototype.rk=function(){},t.prototype.ai=function(){},t}(),CoinsToasterViewController=function(){var t=extend(BaseToasterViewController,function(t){BaseToasterViewController.call(this);var e=Date.now()+"_"+Math.floor(1e3+8999*Math.random());this.El=$('<div id="'+e+'" class="toaster toaster-coins">    <img class="toaster-coins-img" alt="Wormate Coin" src="/images/coin_320.png" />    <div class="toaster-coins-val">+'+t+'</div>    <div class="toaster-coins-close">'+i18n("index.game.toaster.continue")+"</div></div>");var i=this;this.El.find(".toaster-coins-close").click(function(){getApp().r.Cd(),i.sk()})});return t.prototype.rk=function(){return this.El},t.prototype.ai=function(){getApp().r.Fd()},t}(),LevelUpToasterViewController=function(){var t=extend(BaseToasterViewController,function(t){BaseToasterViewController.call(this);var e=Date.now()+"_"+Math.floor(1e3+8999*Math.random());this.El=$('<div id="'+e+'" class="toaster toaster-levelup">    <img class="toaster-levelup-img" alt="Wormate Level Up Star" src="/images/level-star.svg" />    <div class="toaster-levelup-val">'+t+'</div>    <div class="toaster-levelup-text">'+i18n("index.game.toaster.levelup")+'</div>    <div class="toaster-levelup-close">'+i18n("index.game.toaster.continue")+"</div></div>");var i=this;this.El.find(".toaster-levelup-close").click(function(){getApp().r.Cd(),i.sk()})});return t.prototype.rk=function(){return this.El},t.prototype.ai=function(){getApp().r.Ed()},t}(),ConsentAcceptanceToasterViewController=function(){var t=extend(BaseToasterViewController,function(){BaseToasterViewController.call(this);var t=this,e=getApp(),i=Date.now()+"_"+Math.floor(1e3+8999*Math.random());this.El=$('<div id="'+i+'" class="toaster toaster-consent-accepted">    <img class="toaster-consent-accepted-logo" src="'+LINE_LOGO_URL+'" alt="Wormate.io logo"/>    <div class="toaster-consent-accepted-container">        <span class="toaster-consent-accepted-text">'+i18n("index.game.toaster.consent.text").replaceAll(" ","&nbsp;").replaceAll("\n","<br/>")+'</span>        <a class="toaster-consent-accepted-link" href="/privacy-policy">'+i18n("index.game.toaster.consent.link")+'</a>    </div>    <div class="toaster-consent-close">'+i18n("index.game.toaster.consent.iAccept")+"</div></div>"),this.Fl=this.El.find(".toaster-consent-close"),this.Fl.hide(),this.Fl.click(function(){e.r.Cd(),e.Y()&&e.$(!0,!0),t.sk()})});return t.prototype.rk=function(){return this.El},t.prototype.ai=function(){var t=this,e=getApp();e.Y()&&!e.Z()?(e.r.Hd(),setTimeout(function(){t.Fl.fadeIn(300)},2e3)):setTimeout(function(){t.sk()},0)},t}(),ENV_MAP={};ENV_MAP.main={Ma:ADINPLAY_BANNER("aqnvgcpz05orkobh",atob("V1JNX3dvcm1hdGUtaW9fMzAweDI1MA==")),K:ADINPLAY_BANNER("ltmolilci1iurq1i",atob("d29ybWF0ZS1pb185NzB4MjUw")),ra:ADINPLAY_PREROLL_PLAYER(),e:4,oa:!1,gk:!0},ENV_MAP.__dev__={Ma:ADINPLAY_BANNER("aqnvgcpz05orkobh",atob("V1JNX3dvcm1hdGUtaW9fMzAweDI1MA==")),K:ADINPLAY_BANNER("ltmolilci1iurq1i",atob("d29ybWF0ZS1pb185NzB4MjUw")),ra:ADINPLAY_PREROLL_PLAYER(),e:1,oa:!1,gk:!0},ENV_MAP.miniclip={Ma:ADINPLAY_BANNER("aqnvgcpz05orkobh",atob("V1JNX3dvcm1hdGUtaW9fMzAweDI1MA==")),K:ADINPLAY_BANNER("ltmolilci1iurq1i",atob("d29ybWF0ZS1pb185NzB4MjUw")),ra:ADINPLAY_PREROLL_PLAYER(),e:4,oa:!1,gk:!1};var env=ENV_MAP[window.ENV];env||(env=ENV_MAP.main),$(function(){FastClick.attach(document.body)}),addEventListener("contextmenu",function(t){return t.preventDefault(),t.stopPropagation(),!1}),loadScript("//connect.facebook.net/"+LOCALE+"/sdk.js","facebook-jssdk",function(){FB.init({appId:atob("ODYxOTI2ODUwNjE5MDUx"),cookie:!0,xfbml:!0,status:!0,version:"v8.0"})}),loadScript("//apis.google.com/js/api:client.js",null,function(){gapi.load("auth2",function(){GoogleAuth=gapi.auth2.init({client_id:atob("OTU5NDI1MTkyMTM4LXFqcTIzbDllMG9oOGxnZDJpY25ibHJiZmJsYXI0YTJmLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29t")})})}),loadScript("//vk.com/js/api/openapi.js?127",null,function(){VK.init({apiId:5607778}),$("#__vk_like").length&&VK.Widgets.Like("__vk_like",{redesign:1,type:"mini",height:20}),$("#__vk_subscribe").length&&VK.Widgets.Subscribe("__vk_subscribe",{mode:1,soft:1},-124481002)}),loadScript("//platform.twitter.com/widgets.js","twitter-wjs"),loadScript("//vk.com/js/api/share.js?90"),loadScript("//apis.google.com/js/platform.js"),_anApp=Application(),_anApp.v();var loopFunc=function t(){requestAnimationFrame(t),getApp().Pa()};loopFunc();var __resize=function(){var t=j_body.width(),e=j_body.height(),i=j_stretchBox.outerWidth(),o=j_stretchBox.outerHeight(),n=j_markupHeader.outerHeight(),r=j_markupFooter.outerHeight(),s=Math.min(1,Math.min((e-r-n)/o,t/i)),a="translate(-50%, -50%) scale("+s+")";j_stretchBox.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a}),getApp().Ra(),window.scrollTo(0,1)},j_body=$("body"),j_stretchBox=$("#stretch-box"),j_markupHeader=$("#markup-header"),j_markupFooter=$("#markup-footer");__resize(),$(window).resize(__resize)}()});
